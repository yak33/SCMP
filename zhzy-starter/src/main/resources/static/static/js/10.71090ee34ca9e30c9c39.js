webpackJsonp([10],{"+QAp":function(t,a){},gkWe:function(t,a){},pLcT:function(t,a){},wdS9:function(t,a,e){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var n=e("Dd8w"),i=e.n(n),l=e("gyMJ"),s=(e("NYxO"),{props:{type:{type:Number,default:0}},data:function(){return{tableData:[],total:0,loading:!0,empbasicmainid:"",getType:"",infoVisible:!1,zyusageCount:0,btn1:!0,btn2:!0,text1:"放 药",text2:"放 药",daiJian:"",xyList:[],zyList:[],tableArgs:{sortName:"makeDate",sortOrder:"asc",pageSize:10,pageNumber:1}}},methods:{getData:function(){var t=this;this.loading=!0,Object(l.y)(i()({takeflag:this.type},this.tableArgs)).then(function(a){t.loading=!1,"0"==a.data.code?(t.tableData=a.data.data.rows,t.total=a.data.data.total):(t.tableData=[],t.total=0)}).catch(function(a){t.loading=!1})},funTake:function(t){var a=this;this.empbasicmainid=t,Object(l.M)({empBasicMainID:t}).then(function(t){if("0"==t.data.code){if(a.btn1=!1,a.btn2=!1,a.text1="放 药",a.text2="放 药",t.data.data.xyList){a.xyList=t.data.data.xyList;var e=t.data.data.xyFlag,n=t.data.data.xyList.length?t.data.data.xyList[0].takeflag:1;0==e&&(a.text2="未付款",a.btn2=!0),1==n&&(a.text2="已放药",a.btn2=!0)}if(t.data.data.zyList){a.zyList=t.data.data.zyList,a.zyusageCount=t.data.data.usageCount,a.daiJian=t.data.data.daiJian;var i=t.data.data.zyFlag,l=t.data.data.zyList.length?t.data.data.zyList[0].takeflag:1;0==i&&(a.text1="未付款",a.btn1=!0),1==l&&(a.text1="已放药",a.btn1=!0)}}}),this.infoVisible=!0},funUpdata:function(t){var a=this;Object(l._70)({empBasicMainID:this.empbasicmainid,itemType:t}).then(function(t){"0"==t.data.code?(a.$message.success("放药成功!"),a.infoVisible=!1):a.$message.error("放药失败!")})},handlePageChange:function(t){this.tableArgs.pageNumber=t,this.getData()}},mounted:function(){this.getData()}}),r={render:function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("section",[e("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],attrs:{data:t.tableData,fit:"",border:""}},[e("el-table-column",{attrs:{prop:"registrationNum","min-width":"120",label:"挂号序号"}}),t._v(" "),e("el-table-column",{attrs:{prop:"mecidalNum","min-width":"110",label:"就诊号"}}),t._v(" "),e("el-table-column",{attrs:{prop:"emName","min-width":"100",label:"姓名"}}),t._v(" "),e("el-table-column",{attrs:{prop:"makeDate","min-width":"160",label:"就诊日期"}}),t._v(" "),e("el-table-column",{attrs:{prop:"userName","min-width":"100",label:"开单医生"}}),t._v(" "),e("el-table-column",{attrs:{prop:"paystatusstr","min-width":"70",label:"缴费状态"}}),t._v(" "),e("el-table-column",{attrs:{prop:"takeflagstr","min-width":"70",label:"取药状态"}}),t._v(" "),e("el-table-column",{attrs:{prop:"date",label:"操作",align:"center"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("span",{staticClass:"link-blue",on:{click:function(e){t.funTake(a.row.empbasicmainid)}}},[t._v("放药")])]}}])})],1),t._v(" "),e("div",{staticClass:"toolbar",attrs:{span:24}},[e("el-pagination",{staticStyle:{float:"right"},attrs:{background:"",layout:"total, prev, pager, next, jumper","current-page":t.tableArgs.pageNumber,"page-size":t.tableArgs.pageSize,total:t.total},on:{"current-change":t.handlePageChange}})],1),t._v(" "),e("el-dialog",{attrs:{visible:t.infoVisible,title:"药物信息",center:"",width:"60%"},on:{"update:visible":function(a){t.infoVisible=a}}},[t.zyList.length?e("el-row",[e("el-col",{staticStyle:{"font-size":"18px"},attrs:{span:12,align:"left"}},[t._v("中药")]),t._v(" "),e("el-col",{attrs:{span:12,align:"right"}},[e("el-button",{attrs:{size:"medium",type:"primary",disabled:t.btn1},on:{click:function(a){t.funUpdata(0)}}},[t._v(t._s(t.text1))])],1),t._v(" "),e("el-col",{staticClass:"zyitem",attrs:{span:24}},t._l(t.zyList,function(a){return e("span",{key:a.drugcode},[t._v("\r\n            "+t._s(a.drugname)+" "+t._s(a.quantity)+"g ;\r\n          ")])})),t._v(" "),e("el-col",{staticClass:"zyfooter",attrs:{span:24}},[e("div",{staticClass:"zyfooter-inner"},[e("span",[t._v("付数："+t._s(t.zyusageCount))]),t._v(" "),e("span",[t._v("代煎："+t._s(1==t.daiJian?"是":"否"))])])])],1):t._e(),t._v(" "),t.xyList.length?e("el-row",{staticStyle:{"margin-top":"22px"}},[e("el-col",{staticStyle:{"font-size":"18px"},attrs:{span:12,align:"left"}},[t._v("西药")]),t._v(" "),e("el-col",{attrs:{span:12,align:"right"}},[e("el-button",{attrs:{size:"medium",type:"primary",disabled:t.btn2},on:{click:function(a){t.funUpdata(1)}}},[t._v(t._s(t.text2))])],1),t._v(" "),e("el-col",{staticClass:"xyitem",attrs:{span:24}},t._l(t.xyList,function(a){return e("p",{key:a.drugcode},[t._v("\r\n            "+t._s(a.drugname)+"    "+t._s(a.quantity)+t._s(a.prescriptionunitname)+" ;\r\n          ")])}))],1):t._e()],1)],1)},staticRenderFns:[]};var o=e("VU/8")(s,r,!1,function(t){e("pLcT")},"data-v-270876b8",null).exports,d=e("Gu7T"),c=e.n(d),u={data:function(){return{tableData:[],total:0,loading:!0,tableArgs:{sortName:"makeDate",sortOrder:"asc",pageSize:10,pageNumber:1}}},methods:{getData:function(){var t=this;this.loading=!0,l._28.apply(void 0,c()(this.tableArgs)).then(function(a){"0"===a.data.code?(t.tableData=a.data.data.rows,t.total=a.data.data.total):t.$message.error("获取数据失败!"),t.loading=!1}).catch(function(a){t.loading=!1})},handlePageChange:function(){},fmtUnitname:function(t){return t.prescriptionunitname?t.prescriptionunitname:"g"}},mounted:function(){this.getData()}},p={render:function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",[e("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],attrs:{data:t.tableData,fit:"",border:""}},[e("el-table-column",{attrs:{prop:"drugname","min-width":"120",label:"药品名称"}}),t._v(" "),e("el-table-column",{attrs:{prop:"inputcode","min-width":"70",label:"拼音码"}}),t._v(" "),e("el-table-column",{attrs:{prop:"othername","min-width":"210",label:"药品别名"}}),t._v(" "),e("el-table-column",{attrs:{prop:"remainamount","min-width":"100",label:"库存量"}}),t._v(" "),e("el-table-column",{attrs:{prop:"warningamount","min-width":"160",label:"预警值"}}),t._v(" "),e("el-table-column",{attrs:{prop:"danwei","min-width":"100",label:"单位",formatter:t.fmtUnitname}})],1),t._v(" "),e("div",{staticClass:"toolbar",attrs:{span:24}},[e("el-pagination",{staticStyle:{float:"right"},attrs:{background:"",layout:"total, prev, pager, next, jumper","current-page":t.tableArgs.pageNumber,"page-size":t.tableArgs.pageSize,total:t.total},on:{"current-change":t.handlePageChange}})],1)],1)},staticRenderFns:[]};var g={components:{"drug-list":o,"drug-warn":e("VU/8")(u,p,!1,function(t){e("gkWe")},null,null).exports},data:function(){return{activeName:"list_noTake"}},methods:{handleClick:function(t){},funGetListData:function(t){this.$refs.subList.getData(t,1)}},mounted:function(){}},m={render:function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("section",[e("el-tabs",{attrs:{type:"card"},on:{"tab-click":t.handleClick},model:{value:t.activeName,callback:function(a){t.activeName=a},expression:"activeName"}},[e("el-tab-pane",{attrs:{label:"未取药",name:"list_noTake"}},[e("drug-list",{ref:"subList",attrs:{type:0}})],1),t._v(" "),e("el-tab-pane",{attrs:{label:"已取药",name:"list_taked"}},[e("drug-list",{ref:"subList",attrs:{type:1}})],1),t._v(" "),e("el-tab-pane",{attrs:{label:"库存提醒",name:"list_warn"}},[e("drug-warn")],1)],1)],1)},staticRenderFns:[]};var b=e("VU/8")(g,m,!1,function(t){e("+QAp")},"data-v-6c2f1c9e",null);a.default=b.exports}});
//# sourceMappingURL=10.71090ee34ca9e30c9c39.js.map