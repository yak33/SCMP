webpackJsonp([39],{DzHK:function(a,t){},vz4F:function(a,t,e){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=e("gyMJ"),i={data:function(){return{tableData1:[{data:1}],tableData2:[],rules:{evaluationCode:[{required:!0,message:"请选择评价",trigger:"change"}]},info:"",evaluationShow:!1,evaluationData:{evaluationCode:"",evaluationCodeRemark:""},options:[{label:"有效",value:"10001"},{label:"好转",value:"10002"},{label:"痊愈",value:"10003"},{label:"未愈",value:"10004"}],pageInfo:{},chuFangInfo:{},nodeList:[],registrationNum:"",caoYaoItem:[],mecidalNum:"",caseSelectShow:!1,caseList:[],caseSelectList:[],caseCompartShow:!1,caseData1:{},caseData2:{},caoYaoItem1:[],caoYaoItem2:[]}},computed:{evaluationInfo:function(){var a=this,t="";return this.options.forEach(function(e){e.value==a.pageInfo.evaluationCode&&(t=e.label)}),t}},methods:{pagePrint:function(){window.open("#/printPage?id="+this.$route.query.id,"_blank")},handleCompare:function(){var a=this;2!=this.caseSelectList.length?this.$message.error("请选择两条数据比较！"):(this.caseCompartShow=!0,Object(s.W)({registrationNum:this.caseSelectList[0].registrationNum}).then(function(t){"0"==t.data.code&&(a.caseData1=t.data.data[0],Object(s._46)({drugFlag:0,empBasicMainID:t.data.data[0].empBasicMainID}).then(function(t){"0"==t.data.code&&(a.caoYaoItem1=t.data.data.fangJiDetailList)}))}),Object(s.W)({registrationNum:this.caseSelectList[1].registrationNum}).then(function(t){"0"==t.data.code&&(a.caseData2=t.data.data[0],Object(s._46)({drugFlag:0,empBasicMainID:t.data.data[0].empBasicMainID}).then(function(t){"0"==t.data.code&&(a.caoYaoItem2=t.data.data.fangJiDetailList)}))}))},handleCaseChange:function(a){this.caseSelectList=a},handleCaseCompare:function(){this.caseSelectShow=!0,this.getCaseList()},handleOpenEvaluation:function(){this.evaluationShow=!0},handleSetEvaluation:function(){var a=this;this.$refs.ruleForm.validate(function(t){if(!t)return!1;a.saveEvaluation()})},saveEvaluation:function(){var a=this;Object(s.p)({evaluationCode:this.evaluationData.evaluationCode,evaluationRemark:this.evaluationData.evaluationRemark,registrationNum:this.registrationNum,lunAfterImg:""}).then(function(t){"0"===t.data.code?(a.$message.success("评价成功！"),a.getCaseData(),a.evaluationShow=!1):a.$message.error("评价失败！")})},getCaseList:function(){var a=this;Object(s.V)({mecidalNum:this.mecidalNum}).then(function(t){"0"==t.data.code&&(a.caseList=t.data.data)})},chufangPrint:function(){sessionStorage.setItem("current_registrationNum",this.registrationNum),window.open("#/printPrescription?id="+this.registrationNum,"_blank")},getCaseData:function(){var a=this,t=this.$route.query.id||0;this.registrationNum=t,this.mecidalNum=this.$route.query.mn;var e=sessionStorage.getItem("eid");t&&e&&this.mecidalNum?(Object(s.W)({registrationNum:t}).then(function(t){"0"==t.data.code&&(a.pageInfo=t.data.data[0])}),Object(s._46)({drugFlag:0,empBasicMainID:e}).then(function(t){"0"==t.data.code&&(a.chuFangInfo=t.data.data,a.caoYaoItem=t.data.data.fangJiDetailList)})):this.$message.warning("无效访问 请正常进入!")}},mounted:function(){this.getCaseData()}},n={render:function(){var a=this,t=a.$createElement,e=a._self._c||t;return e("section",[e("el-row",[e("el-col",{attrs:{span:24}},[e("span",{staticClass:"top-nav-link",on:{click:a.goBack}},[a._v("返回上一页")])]),a._v(" "),e("el-col",{staticClass:"case-info"},[e("span",{staticClass:"title"},[a._v("【主诉】")]),a._v(" "+a._s(a.pageInfo.chiefComplaint)+"\n      "),e("span",{staticClass:"title"},[a._v("【现病史】")]),a._v(" "+a._s(a.pageInfo.historyPresent)+"\n      "),e("span",{staticClass:"title"},[a._v("【既往史】")]),a._v(" "+a._s(a.pageInfo.historyPast)+"\n      "),e("span",{staticClass:"title"},[a._v("【过敏史】")]),a._v(" "+a._s(a.pageInfo.historyAllergic)+"\n      "),e("span",{staticClass:"title"},[a._v("【体格检查】")]),a._v(" "+a._s(a.pageInfo.physicalExamination)+"\n      "),e("span",{staticClass:"title"},[a._v("【中医病名】")]),a._v(" "+a._s(a.pageInfo.chineseMedicineName)+"\n      "),e("span",{staticClass:"title"},[a._v("【西医病名】")]),a._v(" "+a._s(a.pageInfo.westernMedicineName)+"\n      "),e("span",{staticClass:"title"},[a._v("【证型】")]),a._v(" "+a._s(a.pageInfo.dialecticalName)+"\n      "),e("span",{staticClass:"title"},[a._v("【治法】")]),a._v(" "+a._s(a.pageInfo.cureName)+"\n      "),e("span",{staticClass:"title"},[a._v("【处方名称】")]),a._v(" "+a._s(a.chuFangInfo.drugName)+"\n      "),e("span",{staticClass:"title"},[a._v("【药材】")]),a._v(" "),a._l(a.caoYaoItem,function(t){return e("i",{key:t.drugCode},[a._v(a._s(t.drugName)+" "+a._s(t.quanitity)+"g  ;")])}),a._v(" "),e("span",{staticClass:"title"},[a._v("【付数】")]),a._v(" "+a._s(a.chuFangInfo.usageCount)+"\n      "),e("span",{staticClass:"title"},[a._v("【用法】")]),a._v(" "+a._s(a.chuFangInfo.fangjiUsage)+"\n      "),e("span",{staticClass:"title"},[a._v("【医嘱】")]),a._v(" "+a._s(a.chuFangInfo.advice)+"\n      "),e("span",{staticClass:"title"},[a._v("【治疗评价】")]),a._v(" "+a._s(a.evaluationInfo)+"\n      "),e("span",{staticClass:"title"},[a._v("【评价备注】")]),a._v(" "+a._s(a.pageInfo.evaluationRemark)+"\n      ")],2)],1),a._v(" "),e("el-row",{staticClass:"toolbar"},[e("el-col",{attrs:{span:12}},[e("el-button",{attrs:{size:"medium",type:"primary"},on:{click:a.handleCaseCompare}},[a._v("比较病例")]),a._v(" "),e("el-button",{attrs:{size:"medium",type:"primary"},on:{click:a.handleOpenEvaluation}},[a._v("治疗评价")])],1),a._v(" "),e("el-col",{attrs:{span:12,align:"right"}},[e("el-button",{attrs:{size:"medium",type:"primary"},on:{click:a.pagePrint}},[a._v("打印病例")]),a._v(" "),e("el-button",{attrs:{size:"medium",type:"primary"},on:{click:a.chufangPrint}},[a._v("打印处方")])],1)],1),a._v(" "),e("el-dialog",{attrs:{title:"比较病例",center:"",visible:a.caseCompartShow,width:"80%"},on:{"update:visible":function(t){a.caseCompartShow=t}}},[e("el-row",[e("el-col",{attrs:{span:12}},[e("ul",{staticClass:"case-compart"},[e("li",[e("span",{staticClass:"title"},[a._v("项目")]),a._v(" "),e("span",[a._v(a._s(a.caseData1.registrationNum))])]),a._v(" "),e("li",[e("span",{staticClass:"title"},[a._v("主诉")]),a._v(" "),e("span",[a._v(a._s(a.caseData1.chiefComplaint))])]),a._v(" "),e("li",[e("span",{staticClass:"title"},[a._v("现病史")]),a._v(" "),e("span",[a._v(" "+a._s(a.caseData1.historyPresent)+" ")])]),a._v(" "),e("li",[e("span",{staticClass:"title"},[a._v("既往史")]),a._v(" "),e("span",[a._v(a._s(a.caseData1.historyPast))])]),a._v(" "),e("li",[e("span",{staticClass:"title"},[a._v("过敏史")]),a._v(" "),e("span",[a._v(a._s(a.caseData1.historyAllergic))])]),a._v(" "),e("li",[e("span",{staticClass:"title"},[a._v("体格检查")]),a._v(" "),e("span",[a._v(a._s(a.caseData1.physicalExamination))])]),a._v(" "),e("li",[e("span",{staticClass:"title"},[a._v("中医病名")]),a._v(" "),e("span",[a._v(a._s(a.caseData1.chineseMedicineName))])]),a._v(" "),e("li",[e("span",{staticClass:"title"},[a._v("西医病名")]),a._v(" "),e("span",[a._v(a._s(a.caseData1.westernMedicineName))])]),a._v(" "),e("li",[e("span",{staticClass:"title"},[a._v("证型")]),a._v(" "),e("span",[a._v(a._s(a.caseData1.dialecticalName))])]),a._v(" "),e("li",[e("span",{staticClass:"title"},[a._v("治法")]),a._v(" "),e("span",[a._v(a._s(a.caseData1.cureName))])]),a._v(" "),e("li",[e("span",{staticClass:"title"},[a._v("处方名称")]),a._v(" "),e("span",[a._v(a._s(a.caseData1.drugName))])]),a._v(" "),e("li",[e("span",{staticClass:"title"},[a._v("药材")]),a._v(" "),e("span",a._l(a.caoYaoItem1,function(t){return e("i",{key:t.drugCode},[a._v(a._s(t.drugName)+" "+a._s(t.quanitity)+"g  ;")])}))]),a._v(" "),e("li",[e("span",{staticClass:"title"},[a._v("付数")]),a._v(" "),e("span",[a._v(a._s(a.caseData1.usageCount))])]),a._v(" "),e("li",[e("span",{staticClass:"title"},[a._v("用法")]),a._v(" "),e("span",[a._v(a._s(a.caseData1.fangJiUsage))])]),a._v(" "),e("li",{staticClass:"li-border-last"},[e("span",{staticClass:"title"},[a._v("医嘱")]),a._v(" "),e("span",[a._v(a._s(a.caseData1.advice))])])])]),a._v(" "),e("el-col",{attrs:{span:12}},[e("ul",{staticClass:"case-compart li-border-right"},[e("li",[e("span",[a._v(" "+a._s(a.caseData2.registrationNum))])]),a._v(" "),e("li",[e("span",[a._v(" "+a._s(a.caseData2.chiefComplaint))])]),a._v(" "),e("li",[e("span",[a._v(" "+a._s(a.caseData2.historyPresent)+" ")])]),a._v(" "),e("li",[e("span",[a._v(" "+a._s(a.caseData1.historyPast))])]),a._v(" "),e("li",[e("span",[a._v(" "+a._s(a.caseData2.historyAllergic))])]),a._v(" "),e("li",[e("span",[a._v(" "+a._s(a.caseData2.physicalExamination))])]),a._v(" "),e("li",[e("span",[a._v(" "+a._s(a.caseData2.chineseMedicineName))])]),a._v(" "),e("li",[e("span",[a._v(" "+a._s(a.caseData2.westernMedicineName))])]),a._v(" "),e("li",[e("span",[a._v(" "+a._s(a.caseData2.dialecticalName))])]),a._v(" "),e("li",[e("span",[a._v(" "+a._s(a.caseData2.cureName))])]),a._v(" "),e("li",[e("span",[a._v(" "+a._s(a.caseData2.drugName))])]),a._v(" "),e("li",[e("span",a._l(a.caoYaoItem2,function(t){return e("i",{key:t.drugCode},[a._v(a._s(t.drugName)+" "+a._s(t.quanitity)+"g  ;")])}))]),a._v(" "),e("li",[e("span",[a._v(" "+a._s(a.caseData2.usageCount))])]),a._v(" "),e("li",[e("span",[a._v(" "+a._s(a.caseData2.fangJiUsage))])]),a._v(" "),e("li",{staticClass:"li-border-last"},[e("span",[a._v(" "+a._s(a.caseData2.advice))])])])]),a._v(" "),e("el-col",{staticClass:"toolbar",attrs:{align:"center"}},[e("el-button",{attrs:{size:"medium"},on:{click:function(t){a.caseCompartShow=!1}}},[a._v("关 闭")])],1)],1)],1),a._v(" "),e("el-dialog",{attrs:{title:"治疗评价",center:"",visible:a.evaluationShow},on:{"update:visible":function(t){a.evaluationShow=t}}},[e("el-row",[e("el-col",[e("el-form",{ref:"ruleForm",attrs:{model:a.evaluationData,"label-width":"80px",rules:a.rules}},[e("el-form-item",{attrs:{label:"评价:",prop:"evaluationCode"}},[e("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择治疗评价"},model:{value:a.evaluationData.evaluationCode,callback:function(t){a.$set(a.evaluationData,"evaluationCode",t)},expression:"evaluationData.evaluationCode"}},a._l(a.options,function(a){return e("el-option",{key:a.value,attrs:{label:a.label,value:a.value}})}))],1),a._v(" "),e("el-form-item",{attrs:{label:"备注:"}},[e("el-input",{model:{value:a.evaluationData.evaluationRemark,callback:function(t){a.$set(a.evaluationData,"evaluationRemark",t)},expression:"evaluationData.evaluationRemark"}})],1)],1)],1),a._v(" "),e("el-col",{staticClass:"toolbar",attrs:{align:"center"}},[e("el-button",{attrs:{type:"primary",size:"medium"},on:{click:a.handleSetEvaluation}},[a._v("保 存")]),a._v(" "),e("el-button",{attrs:{size:"medium"},on:{click:function(t){a.evaluationShow=!1}}},[a._v("取 消")])],1)],1)],1),a._v(" "),e("el-dialog",{attrs:{title:"选择病例",center:"",visible:a.caseSelectShow,width:"60%"},on:{"update:visible":function(t){a.caseSelectShow=t}}},[e("el-row",[e("el-col",[e("el-table",{ref:"caseList",staticStyle:{width:"100%"},attrs:{data:a.caseList},on:{"selection-change":a.handleCaseChange}},[e("el-table-column",{attrs:{type:"selection",width:"55"}}),a._v(" "),e("el-table-column",{attrs:{prop:"mecidalNum",label:"就诊号"}}),a._v(" "),e("el-table-column",{attrs:{prop:"registrationNum",label:"挂号序号"}}),a._v(" "),e("el-table-column",{attrs:{prop:"deptName",label:"科室"}}),a._v(" "),e("el-table-column",{attrs:{prop:"userName",label:"医生"}}),a._v(" "),e("el-table-column",{attrs:{prop:"onSetDate",label:"就诊时间","min-width":"160"}})],1)],1),a._v(" "),e("el-col",{staticClass:"toolbar",attrs:{align:"center"}},[e("el-button",{attrs:{type:"primary",size:"medium"},on:{click:a.handleCompare}},[a._v("比 较")]),a._v(" "),e("el-button",{attrs:{size:"medium"},on:{click:function(t){a.caseSelectShow=!1}}},[a._v("关 闭")])],1)],1)],1)],1)},staticRenderFns:[]};var l=e("VU/8")(i,n,!1,function(a){e("DzHK")},"data-v-1fb37468",null);t.default=l.exports}});
//# sourceMappingURL=39.ad0fca9b745d1095c9ad.js.map