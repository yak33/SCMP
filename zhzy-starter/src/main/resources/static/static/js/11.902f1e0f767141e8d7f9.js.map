{"version":3,"sources":["webpack:///src/view/finance/list.vue","webpack:///./src/view/finance/list.vue?0570","webpack:///./src/view/finance/list.vue","webpack:///src/view/finance/index.vue","webpack:///./src/view/finance/index.vue?3140","webpack:///./src/view/finance/index.vue"],"names":["list","computed","extends_default","Object","vuex_esm","costType","state","common","reallyPaySum","_this","this","sum","itemData","length","forEach","element","paystatus","ratio","temp","find","item","mecidalTypeCode","paytype","parseFloat","totalmoney","Math","ceil","toFixed","watch","value","sumTotalmoney","data","infoVisible","empBasicMainID","tableData","total","seletedItem","loading","getType","tableArgs","searchText","sortName","sortOrder","pageSize","pageNumber","methods","realPay","row","tmp","really","getData","type","index","_this2","api","then","res","code","rows","catch","err","itemSelect","getItemList","_this3","toString","funPayItem","_this4","payitem","$message","success","error","funPayAll","funPaytypeChange","typeItem","funPay","id","handleSelectionChange","handlePageChange","finance_list","render","_vm","_h","$createElement","_c","_self","staticStyle","position","directives","name","rawName","expression","attrs","fit","border","prop","min-width","label","_v","align","scopedSlots","_u","key","fn","scope","staticClass","on","click","$event","empbasicmainid","span","float","background","layout","current-page","page-size","current-change","visible","title","width","update:visible","ref","selection-change","select","placeholder","size","change","model","callback","$$v","$set","_l","mecidalTypeName","formatter","_s","staticRenderFns","finance","components","finance-list","__webpack_require__","normalizeComponent","ssrContext","activeName","handleClick","funGetListData","$refs","subList","mounted","view_finance","tab-click","finance_Component","finance_normalizeComponent","__webpack_exports__"],"mappings":"8KA2FAA,GACAC,SAAAC,OACAC,OAAAC,EAAA,EAAAD,EACAE,SAAA,SAAAC,GAAA,OAAAA,EAAAC,OAAAF,aAEAG,aAAA,eAAAC,EAAAC,KACAC,EAAA,EAiBA,OAhBAD,KAAAE,SAAAC,OAAA,EACAF,EAAA,EAEAD,KAAAE,SAAAE,QAAA,SAAAC,GACA,QAAAA,EAAAC,UAAA,CAGA,IAAAC,EAAA,IACAC,EAAAT,EAAAJ,SAAAc,KAAA,SAAAC,GAAA,OAAAA,EAAAC,iBAAAN,EAAAO,UACAJ,IACAD,EAAAC,EAAAD,OAEAN,GAAAY,WAAA,IAAAR,EAAAS,WAAAP,OAIAQ,KAAAC,KAAAH,WAAAZ,EAAA,WAAAgB,QAAA,MAGAC,OACAhB,SAAA,SAAAiB,GACA,GAAAA,EAAAhB,OAAA,GACA,IAAAF,EAAA,EACAkB,EAAAf,QAAA,SAAAC,GACAJ,GAAAY,WAAAR,EAAAS,cAEAd,KAAAoB,cAAAnB,OAEAD,KAAAoB,cAAA,IAKAC,KAxCA,WAyCA,OACAC,aAAA,EACAC,eAAA,GACAC,aACAtB,YACAuB,MAAA,EACAb,QAAA,KACAc,eACAN,cAAA,EACAO,SAAA,EACAC,QAAA,GAEAC,WACAC,WAAA,GACAC,SAAA,WACAC,UAAA,MACAC,SAAA,GACAC,WAAA,KAIAC,SACAC,QADA,SACAC,GAGA,IAAA9B,EAAA,IACA+B,EAAAtC,KAAAL,SAAAc,KAAA,SAAAC,GAAA,OAAAA,EAAAC,iBAAA0B,EAAAzB,UACA0B,IACA/B,EAAAM,WAAAyB,EAAA/B,QAEA,IAAAgC,EAAA,IAAAhC,EAAAM,WAAAwB,EAAAvB,YAAA,IACA,OAAAC,KAAAC,KAAAH,WAAA,IAAA0B,IAAA,KAAAtB,QAAA,IAEAuB,QAZA,SAYAC,EAAAC,GAAA,IAAAC,EAAA3C,KACAA,KAAA2B,SAAA,EACA3B,KAAA6B,UAAAK,WAAAQ,GAAA1C,KAAA6B,UAAAK,gBACA,IAAAO,IACAzC,KAAA4B,QAAAa,GAEMhD,OAAAmD,EAAA,IAAAnD,CAAiBD,KACvBc,UAAAN,KAAA4B,SACA5B,KAAA6B,YACAgB,KAAA,SAAAC,GACAH,EAAAhB,SAAA,EACA,KAAAmB,EAAAzB,KAAA0B,MACAJ,EAAAnB,UAAAsB,EAAAzB,UAAA2B,KACAL,EAAAlB,MAAAqB,EAAAzB,UAAAI,QAEAkB,EAAAnB,aACAmB,EAAAlB,MAAA,KAEAwB,MAAA,SAAAC,GACAP,EAAAhB,SAAA,KAGAwB,WAlCA,SAkCAd,GACA,UAEAe,YArCA,WAqCA,IAAAC,EAAArD,KACMP,OAAAmD,EAAA,GAAAnD,EAAN8B,eAAAvB,KAAAuB,iBAAAsB,KAAA,SAAAC,GACA,KAAAA,EAAAzB,KAAA0B,OACAM,EAAAnD,SAAA4C,EAAAzB,UACAgC,EAAAnD,SAAAE,QAAA,SAAAC,GACAA,EAAAO,QAAAP,EAAAO,QAAA0C,iBAQAC,WAlDA,SAkDAlB,GAAA,IAAAmB,EAAAxD,KACMP,OAAAmD,EAAA,IAAAnD,EACN8B,eAAAvB,KAAAuB,eACAkC,QAAApB,EAAAoB,QACA7C,QAAAyB,EAAAzB,QACAL,MAAA8B,EAAA9B,QACAsC,KAAA,SAAAC,GACA,KAAAA,EAAAzB,KAAA0B,MACAV,EAAA/B,UAAA,IACAkD,EAAAE,SAAAC,QAAA,UAEAH,EAAAE,SAAAE,MAAA,YAIAC,UAjEA,aAoEAC,iBApEA,SAoEApB,EAAAL,GACA,IAAA0B,EAAA/D,KAAAL,SAAAc,KAAA,SAAAC,GAAA,OAAAA,EAAAC,iBAAA+B,IACAL,EAAAzB,QAAAmD,EAAApD,gBACA0B,EAAA9B,MAAAwD,EAAAxD,OAEAyD,OAzEA,SAyEAC,GACAjE,KAAAsB,aAAA,EACAtB,KAAAuB,eAAA0C,EACAjE,KAAAoD,eAEAc,sBA9EA,SA8EA/C,GACAnB,KAAA0B,YAAAP,GAEAgD,iBAjFA,SAiFAzB,GACA1C,KAAA6B,UAAAK,WAAAQ,EACA1C,KAAAwC,aCzOe4B,GADEC,OAFjB,WAA0B,IAAAC,EAAAtE,KAAauE,EAAAD,EAAAE,eAA0BC,EAAAH,EAAAI,MAAAD,IAAAF,EAAwB,OAAAE,EAAA,WAAqBE,aAAaC,SAAA,cAAuBH,EAAA,YAAiBI,aAAaC,KAAA,UAAAC,QAAA,YAAA5D,MAAAmD,EAAA,QAAAU,WAAA,YAA4EC,OAAS5D,KAAAiD,EAAA9C,UAAA0D,IAAA,GAAAC,OAAA,MAA2CV,EAAA,mBAAwBQ,OAAOG,KAAA,kBAAAC,YAAA,MAAAC,MAAA,UAA2DhB,EAAAiB,GAAA,KAAAd,EAAA,mBAAoCQ,OAAOG,KAAA,aAAAC,YAAA,MAAAC,MAAA,SAAqDhB,EAAAiB,GAAA,KAAAd,EAAA,mBAAoCQ,OAAOG,KAAA,SAAAC,YAAA,MAAAC,MAAA,QAAgDhB,EAAAiB,GAAA,KAAAd,EAAA,mBAAoCQ,OAAOG,KAAA,WAAAC,YAAA,MAAAC,MAAA,UAAoDhB,EAAAiB,GAAA,KAAAd,EAAA,mBAAoCQ,OAAOG,KAAA,WAAAC,YAAA,MAAAC,MAAA,UAAoDhB,EAAAiB,GAAA,KAAAd,EAAA,mBAAoCQ,OAAOG,KAAA,eAAAC,YAAA,KAAAC,MAAA,UAAuDhB,EAAAiB,GAAA,KAAAd,EAAA,mBAAoCQ,OAAOG,KAAA,OAAAE,MAAA,KAAAE,MAAA,UAA4CC,YAAAnB,EAAAoB,KAAsBC,IAAA,UAAAC,GAAA,SAAAC,GAAiC,OAAApB,EAAA,QAAmBqB,YAAA,YAAAC,IAA4BC,MAAA,SAAAC,GAAyB3B,EAAAN,OAAA6B,EAAAxD,IAAA6D,oBAAuC5B,EAAAiB,GAAA,gBAAsB,GAAAjB,EAAAiB,GAAA,KAAAd,EAAA,OAA4BqB,YAAA,UAAAb,OAA6BkB,KAAA,MAAW1B,EAAA,iBAAsBE,aAAayB,MAAA,SAAgBnB,OAAQoB,WAAA,GAAAC,OAAA,mCAAAC,eAAAjC,EAAAzC,UAAAK,WAAAsE,YAAAlC,EAAAzC,UAAAI,SAAAR,MAAA6C,EAAA7C,OAAyJsE,IAAKU,iBAAAnC,EAAAH,qBAAuC,GAAAG,EAAAiB,GAAA,KAAAd,EAAA,aAAkCQ,OAAOyB,QAAApC,EAAAhD,YAAAqF,MAAA,OAAAnB,MAAA,SAAAoB,MAAA,OAAwEb,IAAKc,iBAAA,SAAAZ,GAAkC3B,EAAAhD,YAAA2E,MAAyBxB,EAAA,UAAAA,EAAA,UAAAA,EAAA,YAA2CqC,IAAA,YAAA7B,OAAuB5D,KAAAiD,EAAApE,UAAoB6F,IAAKgB,mBAAAzC,EAAAJ,sBAAA8C,OAAA1C,EAAAnB,cAAsEsB,EAAA,mBAAwBQ,OAAOG,KAAA,aAAAC,YAAA,MAAAG,MAAA,SAAAF,MAAA,QAAqEhB,EAAAiB,GAAA,KAAAd,EAAA,mBAAoCQ,OAAOG,KAAA,aAAAC,YAAA,MAAAG,MAAA,SAAAF,MAAA,UAAuEhB,EAAAiB,GAAA,KAAAd,EAAA,mBAAoCQ,OAAOG,KAAA,aAAAC,YAAA,MAAAG,MAAA,SAAAF,MAAA,QAAsEG,YAAAnB,EAAAoB,KAAsBC,IAAA,UAAAC,GAAA,SAAAC,GAAiC,OAAApB,EAAA,aAAwBQ,OAAOgC,YAAA,MAAAC,KAAA,UAAoCnB,IAAKoB,OAAA,SAAAlB,GAA0B3B,EAAAR,iBAAAmC,EAAAJ,EAAAxD,OAAwC+E,OAAQjG,MAAA0E,EAAAxD,IAAA,QAAAgF,SAAA,SAAAC,GAAmDhD,EAAAiD,KAAA1B,EAAAxD,IAAA,UAAAiF,IAAoCtC,WAAA,sBAAiCV,EAAAkD,GAAAlD,EAAA,kBAAA5D,GAAsC,OAAA+D,EAAA,aAAuBkB,IAAAjF,EAAAS,MAAA8D,OAAsBK,MAAA5E,EAAA+G,gBAAAtG,MAAAT,EAAAC,6BAAqE2D,EAAAiB,GAAA,KAAAd,EAAA,mBAAoCQ,OAAOG,KAAA,aAAAC,YAAA,MAAAG,MAAA,SAAAkC,UAAApD,EAAAlC,QAAAkD,MAAA,UAA+FhB,EAAAiB,GAAA,KAAAd,EAAA,mBAAoCQ,OAAOI,YAAA,MAAAG,MAAA,SAAAF,MAAA,MAAgDG,YAAAnB,EAAAoB,KAAsBC,IAAA,UAAAC,GAAA,SAAAC,GAAiC,OAAApB,EAAA,QAAmBI,aAAaC,KAAA,OAAAC,QAAA,SAAA5D,MAAA,KAAA0E,EAAAxD,IAAA/B,UAAA0E,WAAA,+BAAwGc,YAAA,YAAAC,IAA8BC,MAAA,SAAAC,GAAyB3B,EAAAf,WAAAsC,EAAAxD,SAA4BiC,EAAAiB,GAAA,QAAAjB,EAAAiB,GAAA,KAAAd,EAAA,QAAwCI,aAAaC,KAAA,OAAAC,QAAA,SAAA5D,MAAA,KAAA0E,EAAAxD,IAAA/B,UAAA0E,WAAA,+BAAwGc,YAAA,cAA0BxB,EAAAiB,GAAA,iBAAuB,OAAAjB,EAAAiB,GAAA,KAAAd,EAAA,UAAmCqB,YAAA,eAAyBrB,EAAA,QAAAH,EAAAiB,GAAA,SAAAjB,EAAAqD,GAAArD,EAAAlD,kBAAAkD,EAAAiB,GAAA,KAAAd,EAAA,QAAAH,EAAAiB,GAAA,SAAAjB,EAAAqD,GAAArD,EAAAxE,oBAAA,YAE9xG8H,oBCCjB,ICYAC,GACAC,YACAC,eDdyBC,EAAQ,OAcjCC,CACE3I,EACA8E,GATF,EAVA,SAAA8D,GACEF,EAAQ,SAaV,kBAEA,MAUgC,SCPhC3G,KAJA,WAKA,OACA8G,WAAA,eAGAhG,SACAiG,YADA,SACAjH,GACA,IAAAsB,EAAA,EACA,YAAAtB,EAAA2D,OACArC,EAAA,GAEA,WAAAtB,EAAA2D,OACArC,EAAA,GAEAzC,KAAAqI,eAAA5F,IAEA4F,eAXA,SAWA5F,GACAzC,KAAAsI,MAAAC,QAAA/F,QAAAC,EAAA,KAGA+F,QAxBA,WAyBAxI,KAAAqI,eAAA,KCrCeI,GADEpE,OAFP,WAAgB,IAAAC,EAAAtE,KAAauE,EAAAD,EAAAE,eAA0BC,EAAAH,EAAAI,MAAAD,IAAAF,EAAwB,OAAAE,EAAA,WAAAA,EAAA,WAAmCQ,OAAOxC,KAAA,QAAcsD,IAAK2C,YAAApE,EAAA8D,aAA4BhB,OAAQjG,MAAAmD,EAAA,WAAA+C,SAAA,SAAAC,GAAgDhD,EAAA6D,WAAAb,GAAmBtC,WAAA,gBAA0BP,EAAA,eAAoBQ,OAAOK,MAAA,MAAAR,KAAA,gBAAmCR,EAAAiB,GAAA,KAAAd,EAAA,eAAgCQ,OAAOK,MAAA,MAAAR,KAAA,cAAiCR,EAAAiB,GAAA,KAAAd,EAAA,eAAgCQ,OAAOK,MAAA,OAAAR,KAAA,aAAiCR,EAAAiB,GAAA,KAAAd,EAAA,gBAAiCqC,IAAA,aAAc,QAEpfc,oBCChC,IAcIe,EAdqBX,EAAQ,OAcjBY,CACdf,EACAY,GAT6B,EAV/B,SAAoBP,GAClBF,EAAQ,SAaS,kBAEU,MAUda,EAAA,QAAAF,EAAiB","file":"static/js/11.902f1e0f767141e8d7f9.js","sourcesContent":["<template>\r\n<section style=\"position:relative\">\r\n        <!-- 顶部查询框 -->\r\n    <!-- <div class=\"table-top-searchbox\">\r\n      <el-input suffix-icon=\"el-icon-search\" clearable size=\"small\"\r\n      placeholder=\"输入您想要查询的病人姓名/就诊号/身份证号\" v-model=\"tableArgs.searchText\"\r\n      @keydown.enter.native=\"getData\"  @blur=\"getData\" ></el-input>\r\n    </div> -->\r\n    <el-table :data=\"tableData\" fit border v-loading=\"loading\">\r\n      <el-table-column prop=\"registrationNum\" min-width=\"120\" label=\"挂号序号\"></el-table-column>\r\n      <el-table-column prop=\"mecidalNum\" min-width=\"110\"  label=\"就诊号\"></el-table-column>\r\n      <el-table-column prop=\"emName\" min-width=\"100\" label=\"姓名\"></el-table-column>\r\n      <el-table-column prop=\"makeDate\" min-width=\"160\" label=\"就诊日期\"></el-table-column>\r\n      <el-table-column prop=\"userName\" min-width=\"100\" label=\"开单医生\"></el-table-column>\r\n      <el-table-column prop=\"paystatusstr\" min-width=\"70\" label=\"缴费状态\"></el-table-column>\r\n      <el-table-column prop=\"date\" label=\"操作\" align=\"center\">\r\n        <template slot-scope=\"scope\">\r\n          <span class=\"link-blue\" @click=\"funPay(scope.row.empbasicmainid)\">缴费</span>\r\n        </template>\r\n      </el-table-column>\r\n    </el-table>\r\n    <div :span=\"24\" class=\"toolbar\">\r\n      <el-pagination background layout=\"total, prev, pager, next, jumper\" @current-change=\"handlePageChange\" :current-page=\"tableArgs.pageNumber\" :page-size=\"tableArgs.pageSize\" :total=\"total\" style=\"float:right;\">\r\n      </el-pagination>\r\n    </div>\r\n    <el-dialog\r\n      :visible.sync=\"infoVisible\"\r\n      title=\"费用信息\"\r\n      align=\"center\"\r\n      width=\"70%\">\r\n      <el-row>\r\n        <el-col>\r\n          <el-table :data=\"itemData\"\r\n          @selection-change=\"handleSelectionChange\"\r\n          @select = \"itemSelect\"\r\n           ref=\"itemTable\">\r\n            <!-- <el-table-column type=\"selection\" width=\"55\"></el-table-column> -->\r\n            <el-table-column prop=\"payitemstr\" min-width=\"110\" align=\"center\"   label=\"项目\"></el-table-column>\r\n            <el-table-column prop=\"totalmoney\" min-width=\"110\" align=\"center\"   label=\"费用金额\"></el-table-column>\r\n            <el-table-column prop=\"totalmoney\" min-width=\"110\" align=\"center\"   label=\"费用类别\">\r\n              <template slot-scope=\"scope\">\r\n                <el-select v-model=\"scope.row.paytype\"\r\n                @change=\"funPaytypeChange($event,scope.row)\"\r\n                 placeholder=\"请选择\" size=\"medium\">\r\n                  <el-option\r\n                    v-for=\"item in costType\"\r\n                    :key=\"item.value\"\r\n                    :label=\"item.mecidalTypeName\"\r\n                    :value=\"item.mecidalTypeCode\">\r\n                  </el-option>\r\n                </el-select>\r\n              </template>\r\n            </el-table-column>\r\n            <el-table-column prop=\"totalmoney\" min-width=\"110\" align=\"center\"  :formatter=\"realPay\"  label=\"应付金额\"></el-table-column>\r\n            <el-table-column min-width=\"110\" align=\"center\"  label=\"操作\">\r\n              <template slot-scope=\"scope\">\r\n                <span class=\"link-blue\" v-show=\"scope.row.paystatus == '0'\" @click=\"funPayItem(scope.row)\">付款</span>\r\n                <span class=\"link-blue\" v-show=\"scope.row.paystatus == '1'\">已付款</span>\r\n              </template>\r\n            </el-table-column>\r\n          </el-table>\r\n        </el-col>\r\n        <el-col class=\"pay-bottom\">\r\n          <span>总费用: ￥{{sumTotalmoney}}</span>\r\n          <span>实付款: ￥{{reallyPaySum}}</span>\r\n        </el-col>\r\n        <!-- <el-col class=\"pay-bottom\">\r\n          <span>费用类别:\r\n            <el-select width=\"100px\" v-model=\"paytype\" placeholder=\"请选择\" size=\"medium\">\r\n                  <el-option\r\n                    v-for=\"item in costType\"\r\n                    :key=\"item.value\"\r\n                    :label=\"item.mecidalTypeName\"\r\n                    :value=\"item.mecidalTypeCode\">\r\n                  </el-option>\r\n                </el-select></span>\r\n          <el-button type=\"primary\" size=\"medium\" @click=\"funPayAll\">全部付款</el-button>\r\n        </el-col> -->\r\n      </el-row>\r\n    </el-dialog>\r\n</section>\r\n</template>\r\n\r\n<script>\r\nimport {\r\n  getPayStatusList, // 获取列表\r\n  getItemList, // 项目详情\r\n  updateStatus, // 项目缴费\r\n  updateStatusAll, // 多项目付款\r\n} from '../../api'\r\nimport {mapState} from 'vuex'\r\nexport default {\r\n  computed:{\r\n    ...mapState({\r\n      costType: state=> state.common.costType, // 就诊类型\r\n    }),\r\n    reallyPaySum:function () {\r\n      let sum = 0\r\n      if(!this.itemData.length>0){\r\n        sum = 0\r\n      }else{\r\n        this.itemData.forEach(element=>{\r\n          if(element.paystatus == '0'){\r\n            return\r\n          }\r\n          let ratio = 100\r\n          let temp = this.costType.find(item=>item.mecidalTypeCode == element.paytype)\r\n          if(temp){\r\n            ratio = temp.ratio\r\n          }\r\n          sum += parseFloat(element.totalmoney * 100 * ratio)\r\n        })\r\n      }\r\n\r\n      return (Math.ceil(parseFloat(sum / 100)) / 100).toFixed(2)\r\n    }\r\n  },\r\n  watch:{\r\n    itemData:function (value) {\r\n      if(value.length>0){\r\n        let sum = 0\r\n        value.forEach(element=>{\r\n          sum += parseFloat(element.totalmoney)\r\n        })\r\n        this.sumTotalmoney = sum\r\n      }else{\r\n        this.sumTotalmoney = 0\r\n      }\r\n\r\n    }\r\n  },\r\n  data(){\r\n    return{\r\n      infoVisible: false, // 弹窗\r\n      empBasicMainID: '', // 当前病例\r\n      tableData: [], // 表格数据\r\n      itemData: [], // 详情数据\r\n      total: 0, // 数据条数\r\n      paytype: '60', // 费用类型\r\n      seletedItem: [], // 已选中条目\r\n      sumTotalmoney: 0, // 总金额\r\n      loading: true, // 显示加载\r\n      getType: \"\", // 类型\r\n   //   reallyPaySum: '', // 实付金额\r\n      tableArgs:{ // 查询参数\r\n        searchText:'',\r\n        sortName: 'makeDate',\r\n        sortOrder: 'asc',\r\n        pageSize: 10,\r\n        pageNumber: 1,\r\n      }\r\n    }\r\n  },\r\n  methods:{\r\n    realPay(row){\r\n      // row.paytype\r\n      // totalmoney\r\n      let ratio = 100\r\n      let tmp = this.costType.find(item=>item.mecidalTypeCode == row.paytype)\r\n      if(tmp){\r\n        ratio = parseFloat(tmp.ratio)\r\n      }\r\n      let really = ratio* 100 * parseFloat(row.totalmoney) / 10000\r\n      return (Math.ceil(parseFloat(really * 100)) / 100).toFixed(2)\r\n    },\r\n    getData(type,index){\r\n      this.loading = true\r\n      this.tableArgs.pageNumber = index ? index : this.tableArgs.pageNumber\r\n      if(typeof type!=\"undefined\"){\r\n        this.getType = type\r\n      }\r\n      getPayStatusList({\r\n        paystatus: this.getType,\r\n        ...this.tableArgs\r\n      }).then(res=>{\r\n        this.loading = false\r\n        if(res.data.code == '0'){\r\n          this.tableData = res.data.data.rows\r\n          this.total = res.data.data.total\r\n        }else{\r\n          this.tableData = []\r\n          this.total = 0\r\n        }\r\n      }).catch(err => {\r\n        this.loading = false\r\n      })\r\n    },\r\n    itemSelect(row){ // 条目选中\r\n      return false\r\n    },\r\n    getItemList(){ // 获取详细条目\r\n      getItemList({empBasicMainID: this.empBasicMainID}).then(res=>{\r\n        if(res.data.code == '0'){\r\n          this.itemData = res.data.data\r\n          this.itemData.forEach(element=>{\r\n            element.paytype = element.paytype.toString()\r\n          })\r\n       //   this.$refs.itemTable.toggleAllSelection()\r\n        }else{\r\n\r\n        }\r\n      })\r\n    },\r\n    funPayItem(row){ // 支付条目\r\n      updateStatus({\r\n        empBasicMainID: this.empBasicMainID,\r\n        payitem: row.payitem,\r\n        paytype: row.paytype,\r\n        ratio: row.ratio\r\n      }).then(res=>{\r\n        if(res.data.code == '0'){\r\n          row.paystatus = '1'\r\n          this.$message.success('付款成功!')\r\n        }else{\r\n          this.$message.error('付款失败!')\r\n        }\r\n      })\r\n    },\r\n    funPayAll(){ // 支付全部\r\n\r\n    },\r\n    funPaytypeChange(index,row){ // 支付类型更改\r\n      let typeItem = this.costType.find(item=>item.mecidalTypeCode == index)\r\n      row.paytype = typeItem.mecidalTypeCode\r\n      row.ratio = typeItem.ratio\r\n    },\r\n    funPay(id){ // 打开缴费项目\r\n      this.infoVisible = true\r\n      this.empBasicMainID = id\r\n      this.getItemList()\r\n    },\r\n    handleSelectionChange(value){ // 选择条目\r\n      this.seletedItem = value\r\n    },\r\n    handlePageChange(index){ // 页码切换\r\n      this.tableArgs.pageNumber = index\r\n      this.getData()\r\n    },\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.link-blue{\r\n  text-align: center;\r\n  color: #3E85FA;\r\n  cursor: pointer;\r\n}\r\n.pay-bottom{\r\n  margin-top: 20px;\r\n  text-align: right;\r\n}\r\n.pay-bottom span{\r\n  font-size: 17px;\r\n  margin: 0 20px;\r\n}\r\n.pay-bottom button{\r\n  margin: 0 20px;\r\n}\r\n.table-top-searchbox{\r\n  position: absolute;\r\n  right: 2px;\r\n  height: 60px;\r\n  width: 360px;\r\n  z-index: 10;\r\n}\r\n</style>\r\n\r\n\n\n\n// WEBPACK FOOTER //\n// src/view/finance/list.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('section',{staticStyle:{\"position\":\"relative\"}},[_c('el-table',{directives:[{name:\"loading\",rawName:\"v-loading\",value:(_vm.loading),expression:\"loading\"}],attrs:{\"data\":_vm.tableData,\"fit\":\"\",\"border\":\"\"}},[_c('el-table-column',{attrs:{\"prop\":\"registrationNum\",\"min-width\":\"120\",\"label\":\"挂号序号\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"mecidalNum\",\"min-width\":\"110\",\"label\":\"就诊号\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"emName\",\"min-width\":\"100\",\"label\":\"姓名\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"makeDate\",\"min-width\":\"160\",\"label\":\"就诊日期\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"userName\",\"min-width\":\"100\",\"label\":\"开单医生\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"paystatusstr\",\"min-width\":\"70\",\"label\":\"缴费状态\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"date\",\"label\":\"操作\",\"align\":\"center\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('span',{staticClass:\"link-blue\",on:{\"click\":function($event){_vm.funPay(scope.row.empbasicmainid)}}},[_vm._v(\"缴费\")])]}}])})],1),_vm._v(\" \"),_c('div',{staticClass:\"toolbar\",attrs:{\"span\":24}},[_c('el-pagination',{staticStyle:{\"float\":\"right\"},attrs:{\"background\":\"\",\"layout\":\"total, prev, pager, next, jumper\",\"current-page\":_vm.tableArgs.pageNumber,\"page-size\":_vm.tableArgs.pageSize,\"total\":_vm.total},on:{\"current-change\":_vm.handlePageChange}})],1),_vm._v(\" \"),_c('el-dialog',{attrs:{\"visible\":_vm.infoVisible,\"title\":\"费用信息\",\"align\":\"center\",\"width\":\"70%\"},on:{\"update:visible\":function($event){_vm.infoVisible=$event}}},[_c('el-row',[_c('el-col',[_c('el-table',{ref:\"itemTable\",attrs:{\"data\":_vm.itemData},on:{\"selection-change\":_vm.handleSelectionChange,\"select\":_vm.itemSelect}},[_c('el-table-column',{attrs:{\"prop\":\"payitemstr\",\"min-width\":\"110\",\"align\":\"center\",\"label\":\"项目\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"totalmoney\",\"min-width\":\"110\",\"align\":\"center\",\"label\":\"费用金额\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"totalmoney\",\"min-width\":\"110\",\"align\":\"center\",\"label\":\"费用类别\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('el-select',{attrs:{\"placeholder\":\"请选择\",\"size\":\"medium\"},on:{\"change\":function($event){_vm.funPaytypeChange($event,scope.row)}},model:{value:(scope.row.paytype),callback:function ($$v) {_vm.$set(scope.row, \"paytype\", $$v)},expression:\"scope.row.paytype\"}},_vm._l((_vm.costType),function(item){return _c('el-option',{key:item.value,attrs:{\"label\":item.mecidalTypeName,\"value\":item.mecidalTypeCode}})}))]}}])}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"totalmoney\",\"min-width\":\"110\",\"align\":\"center\",\"formatter\":_vm.realPay,\"label\":\"应付金额\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"min-width\":\"110\",\"align\":\"center\",\"label\":\"操作\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('span',{directives:[{name:\"show\",rawName:\"v-show\",value:(scope.row.paystatus == '0'),expression:\"scope.row.paystatus == '0'\"}],staticClass:\"link-blue\",on:{\"click\":function($event){_vm.funPayItem(scope.row)}}},[_vm._v(\"付款\")]),_vm._v(\" \"),_c('span',{directives:[{name:\"show\",rawName:\"v-show\",value:(scope.row.paystatus == '1'),expression:\"scope.row.paystatus == '1'\"}],staticClass:\"link-blue\"},[_vm._v(\"已付款\")])]}}])})],1)],1),_vm._v(\" \"),_c('el-col',{staticClass:\"pay-bottom\"},[_c('span',[_vm._v(\"总费用: ￥\"+_vm._s(_vm.sumTotalmoney))]),_vm._v(\" \"),_c('span',[_vm._v(\"实付款: ￥\"+_vm._s(_vm.reallyPaySum))])])],1)],1)],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-731f1b86\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/view/finance/list.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true,\\\"publicPath\\\":\\\"../../\\\"}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-731f1b86\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./list.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./list.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./list.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-731f1b86\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./list.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-731f1b86\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/view/finance/list.vue\n// module id = null\n// module chunks = ","<template>\r\n<section>\r\n  <el-tabs v-model=\"activeName\" type=\"card\" @tab-click=\"handleClick\">\r\n    <el-tab-pane label=\"未交费\" name=\"list_noPay\">\r\n    </el-tab-pane>\r\n    <el-tab-pane label=\"已交费\" name=\"list_pay\">\r\n    </el-tab-pane>\r\n    <el-tab-pane label=\"部分交费\" name=\"can_pay\">\r\n    </el-tab-pane>\r\n    <finance-list ref=\"subList\"></finance-list>\r\n  </el-tabs>\r\n</section>\r\n</template>\r\n<script>\r\nimport list from './list'\r\nexport default {\r\n  components:{\r\n    'finance-list': list\r\n  },\r\n  data(){\r\n    return{\r\n      activeName: 'list_noPay',\r\n    }\r\n  },\r\n  methods:{\r\n    handleClick(value){\r\n      let type = 0\r\n      if(value.name == 'list_pay'){\r\n        type = 1\r\n      }\r\n      if(value.name == 'can_pay'){\r\n        type = 2\r\n      }\r\n      this.funGetListData(type)\r\n    },\r\n    funGetListData(type){\r\n      this.$refs.subList.getData(type,1)\r\n    }\r\n  },\r\n  mounted(){\r\n    this.funGetListData(0)\r\n  }\r\n}\r\n</script>\r\n<style scoped>\r\n\r\n</style>\r\n\n\n\n// WEBPACK FOOTER //\n// src/view/finance/index.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('section',[_c('el-tabs',{attrs:{\"type\":\"card\"},on:{\"tab-click\":_vm.handleClick},model:{value:(_vm.activeName),callback:function ($$v) {_vm.activeName=$$v},expression:\"activeName\"}},[_c('el-tab-pane',{attrs:{\"label\":\"未交费\",\"name\":\"list_noPay\"}}),_vm._v(\" \"),_c('el-tab-pane',{attrs:{\"label\":\"已交费\",\"name\":\"list_pay\"}}),_vm._v(\" \"),_c('el-tab-pane',{attrs:{\"label\":\"部分交费\",\"name\":\"can_pay\"}}),_vm._v(\" \"),_c('finance-list',{ref:\"subList\"})],1)],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-7d0e0ea0\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/view/finance/index.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true,\\\"publicPath\\\":\\\"../../\\\"}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-7d0e0ea0\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./index.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./index.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./index.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-7d0e0ea0\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./index.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-7d0e0ea0\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/view/finance/index.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}