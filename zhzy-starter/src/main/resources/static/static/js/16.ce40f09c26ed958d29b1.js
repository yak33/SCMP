webpackJsonp([16],{PXGo:function(e,a){},e6sp:function(e,a,t){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var s=t("Dd8w"),n=t.n(s),r=t("gyMJ"),l=t("NYxO"),o=t("8KPR"),i={computed:n()({},Object(l.d)("common",{keshi:function(e){return e.keshi}}),{usable:function(){return"add"!=this.opType}}),data:function(){return{tableData:[],usedphrasestype:"",dialog_item:!1,opType:"add",formData:{},total:0,title:"",options:[],buttonShow:!1,saveData:{usedphrasesname:"",usedphrasestype:""},search:{searchText:"",pageNumber:1,pageSize:10},deptList:[],rules:{usedphrasesname2:[{required:!0,message:"请输入模板名称",trigger:"blur"}],pinyincode:[{required:!0,message:"请输入输入码",trigger:"blur"}],usedphrasestype2:[{required:!0,message:"请输入模板类型",trigger:"change"}],usedphrasescontent:[{required:!0,message:"请输入模板内容",trigger:"blur"}]},mubanList:[{value:40,label:"主诉"},{value:20,label:"过敏史"},{value:30,label:"既往史"},{value:10,label:"现病史"},{value:50,label:"体格检查"},{value:60,label:"其他"},{value:70,label:"医嘱"},{value:80,label:"全部"}]}},methods:{handelSubmit:function(){"add"==this.opType?this.funChenkFormData():this.handelUpdataDW()},funPinYinCode:function(){this.formData.usedphrasesname2&&"add"==this.opType&&(this.formData.pinyincode=Object(o.a)(this.formData.usedphrasesname2))},handelRadioChange:function(e){this.usedphrasestype=e,this.search.pageNumber=1,this.getData()},funChenkFormData:function(){var e=this;0!=this.deptList.length?this.$refs.ruleForm.validate(function(a){a&&e.handelInsert()}):this.$message.warning("请选择所属科室！")},handelInsert:function(){var e=this;this.formData.usedphrasesname=this.formData.usedphrasesname2,this.formData.usedphrasestype=this.formData.usedphrasestype2,this.formData.deptcode=this.funFormart(),Object(r._42)(this.formData).then(function(a){"0"==a.data.code?(e.$message.success("保存成功！"),e.dialog_item=!1,e.funGetAllData()):e.$message.error("保存失败！")})},handelAddItem:function(){this.title="新增",this.deptList=[],this.opType="add",this.formData={usedphrasesname2:"",pinyincode:"",usedphrasestype2:"",usedphrasescontent:""},this.dialog_item=!0,this.buttonShow=!0},handelDelete:function(e,a){var t=this;this.$confirm("确定要执行删除操作？","操作提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){Object(r.l)({usedphrasestype:e.usedphrasestype,usedphrasesname:e.usedphrasesname}).then(function(e){"0"==e.data.code&&t.$message.success("删除成功!")}),t.funGetAllData()}).catch(function(){})},funSaveTempData:function(e){this.saveData.usedphrasesname=e.usedphrasesname,this.formData.usedphrasesname2=e.usedphrasesname,this.saveData.usedphrasestype=e.usedphrasestype,this.formData.usedphrasestype2=e.usedphrasestype},funGetAllData:function(){this.search.searchText="",this.search.pageNumber=1,this.getData()},handelView:function(e){this.title="查看",this.opType="view",this.formData=n()({},e),this.funSaveTempData(this.formData),this.funFill(e.deptcode),this.dialog_item=!0},funFill:function(e){var a=this;e.split(",").forEach(function(e){a.keshi.forEach(function(t){e==t.deptCode&&a.deptList.push(t.deptName)})})},funFormart:function(){var e=this,a="";return this.deptList.forEach(function(t){e.keshi.forEach(function(e){e.deptName==t&&(a=a+e.deptCode+",")})}),a},handelUpdata:function(e){this.title="修改",this.opType="edit",this.deptList=[],this.funFill(e.deptcode),this.buttonShow=!0,this.dialog_item=!0,this.formData=e,this.funSaveTempData(e)},dialogClose:function(){var e=this;this.buttonShow=!1,this.formData={},this.$nextTick(function(){e.$refs.ruleForm.resetFields()})},getData:function(){var e=this,a=n()({usedPhrasesType:this.usedphrasestype},this.search);Object(r._26)(a).then(function(a){"0"==a.data.code?(e.tableData=a.data.data.rows,e.total=a.data.data.total):(e.tableData=[],e.total=0)})},getDataBySearch:function(){this.search.usedPhrasesName&&(this.search.pageNumber=1,this.getData())},handelPageChange:function(e){this.search.pageNumber=e,this.getData()},handelUpdataDW:function(){var e=this;this.formData.deptcode=this.funFormart(),Object(r._72)(n()({},this.formData,this.saveData)).then(function(a){"0"==a.data.code?(e.$message.success("修改成功!"),e.getData(),e.dialog_item=!1):e.$message.error("修改失败!")})}},mounted:function(){this.getData()}},u={render:function(){var e=this,a=e.$createElement,s=e._self._c||a;return s("section",[s("el-row",[s("el-col",{attrs:{span:8}},[s("el-input",{attrs:{"suffix-icon":"el-icon-search",clearable:"",placeholder:"输入您想查询的模板名称"},on:{blur:function(a){e.getDataBySearch()}},nativeOn:{keyup:function(a){if(!("button"in a)&&e._k(a.keyCode,"enter",13,a.key,"Enter"))return null;e.getData()}},model:{value:e.search.usedPhrasesName,callback:function(a){e.$set(e.search,"usedPhrasesName",a)},expression:"search.usedPhrasesName"}})],1),e._v(" "),s("el-col",{attrs:{span:15,align:"right"}},[s("el-button",{attrs:{size:"small",type:"primary",icon:"el-icon-plus"},on:{click:e.handelAddItem}},[e._v("新 增")])],1),e._v(" "),s("el-col",{staticStyle:{margin:"16px 0 0 8px"},attrs:{span:24}},[s("el-radio",{attrs:{label:""},on:{change:e.handelRadioChange},model:{value:e.usedphrasestype,callback:function(a){e.usedphrasestype=a},expression:"usedphrasestype"}},[e._v("全部")]),e._v(" "),s("el-radio",{attrs:{label:"40"},on:{change:e.handelRadioChange},model:{value:e.usedphrasestype,callback:function(a){e.usedphrasestype=a},expression:"usedphrasestype"}},[e._v("主诉")]),e._v(" "),s("el-radio",{attrs:{label:"20"},on:{change:e.handelRadioChange},model:{value:e.usedphrasestype,callback:function(a){e.usedphrasestype=a},expression:"usedphrasestype"}},[e._v("过敏史")]),e._v(" "),s("el-radio",{attrs:{label:"30"},on:{change:e.handelRadioChange},model:{value:e.usedphrasestype,callback:function(a){e.usedphrasestype=a},expression:"usedphrasestype"}},[e._v("既往史")]),e._v(" "),s("el-radio",{attrs:{label:"10"},on:{change:e.handelRadioChange},model:{value:e.usedphrasestype,callback:function(a){e.usedphrasestype=a},expression:"usedphrasestype"}},[e._v("现病史")]),e._v(" "),s("el-radio",{attrs:{label:"50"},on:{change:e.handelRadioChange},model:{value:e.usedphrasestype,callback:function(a){e.usedphrasestype=a},expression:"usedphrasestype"}},[e._v("体格检查")]),e._v(" "),s("el-radio",{attrs:{label:"60"},on:{change:e.handelRadioChange},model:{value:e.usedphrasestype,callback:function(a){e.usedphrasestype=a},expression:"usedphrasestype"}},[e._v("其他")]),e._v(" "),s("el-radio",{attrs:{label:"70"},on:{change:e.handelRadioChange},model:{value:e.usedphrasestype,callback:function(a){e.usedphrasestype=a},expression:"usedphrasestype"}},[e._v("医嘱")])],1),e._v(" "),s("el-col",{staticStyle:{"margin-top":"16px"},attrs:{span:24}},[s("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData},on:{"cell-dblclick":e.handelView}},[s("el-table-column",{attrs:{formatter:e.elFormatMuBanName,prop:"usedphrasestype",label:"模板类型",width:"100"}}),e._v(" "),s("el-table-column",{attrs:{prop:"usedphrasesname",label:"模板名称",width:"160"}}),e._v(" "),s("el-table-column",{attrs:{prop:"pinyincode",label:"拼音码",width:"120"}}),e._v(" "),s("el-table-column",{attrs:{"show-overflow-tooltip":"",prop:"usedphrasescontent",label:"模板内容"}}),e._v(" "),s("el-table-column",{attrs:{width:"160",prop:"remarksub",label:"备注"}}),e._v(" "),s("el-table-column",{attrs:{"header-align":"center",width:"120",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(a){return[s("el-button-group",[s("span",{staticClass:"icon-button-img",on:{click:function(t){e.handelDelete(a.row)}}},[s("img",{attrs:{src:t("DKbd")}})]),e._v(" "),s("span",{staticClass:"icon-button-img",on:{click:function(t){e.handelUpdata(a.row)}}},[s("img",{attrs:{src:t("4g3x")}})])])]}}])})],1)],1),e._v(" "),s("el-col",{staticClass:"toolbar",attrs:{span:24}},[s("el-pagination",{staticStyle:{float:"right"},attrs:{background:"",layout:"total, prev, pager, next, jumper","current-page":e.search.pageNumber,"page-size":e.search.pageSize,total:e.total},on:{"current-change":e.handelPageChange}})],1)],1),e._v(" "),s("el-dialog",{attrs:{title:"模板设置 "+e.title,center:"",width:"80%",visible:e.dialog_item},on:{close:e.dialogClose,"update:visible":function(a){e.dialog_item=a}}},[s("el-row",[s("el-form",{ref:"ruleForm",attrs:{model:e.formData,"label-width":"100px",rules:e.rules}},[s("el-col",{attrs:{span:8}},[s("el-form-item",{attrs:{label:"模板名称",prop:"usedphrasesname2"}},[s("el-input",{on:{blur:e.funPinYinCode},model:{value:e.formData.usedphrasesname2,callback:function(a){e.$set(e.formData,"usedphrasesname2",a)},expression:"formData.usedphrasesname2"}})],1)],1),e._v(" "),s("el-col",{attrs:{span:8}},[s("el-form-item",{attrs:{label:"拼音码",prop:"pinyincode"}},[s("el-input",{model:{value:e.formData.pinyincode,callback:function(a){e.$set(e.formData,"pinyincode",a)},expression:"formData.pinyincode"}})],1)],1),e._v(" "),s("el-col",{attrs:{span:8}},[s("el-form-item",{attrs:{label:"模板类型",prop:"usedphrasestype2"}},[s("el-select",{attrs:{placeholder:"请选择"},model:{value:e.formData.usedphrasestype2,callback:function(a){e.$set(e.formData,"usedphrasestype2",a)},expression:"formData.usedphrasestype2"}},e._l(e.mubanList,function(e){return s("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1)],1),e._v(" "),s("el-col",{staticStyle:{"text-align":"right","max-width":"100px","padding-right":"6px"},attrs:{span:2}},[e._v("\n        所属科室\n      ")]),e._v(" "),s("el-col",{staticClass:"dept-box",attrs:{span:22}},[s("el-checkbox-group",{model:{value:e.deptList,callback:function(a){e.deptList=a},expression:"deptList"}},e._l(e.keshi,function(e){return s("el-checkbox",{key:e.deptCode,attrs:{label:e.deptName}})}))],1),e._v(" "),s("el-col",{attrs:{span:24}},[s("el-form-item",{attrs:{label:"模板内容",prop:"usedphrasescontent"}},[s("el-input",{attrs:{type:"textarea",rows:2,placeholder:"请输入内容"},model:{value:e.formData.usedphrasescontent,callback:function(a){e.$set(e.formData,"usedphrasescontent",a)},expression:"formData.usedphrasescontent"}})],1)],1),e._v(" "),s("el-col",{attrs:{span:24}},[s("el-form-item",{attrs:{label:"备注"}},[s("el-input",{attrs:{type:"textarea",rows:2,placeholder:"请输入内容"},model:{value:e.formData.remarksub,callback:function(a){e.$set(e.formData,"remarksub",a)},expression:"formData.remarksub"}})],1)],1)],1),e._v(" "),s("el-col",{staticClass:"toolbar",attrs:{align:"center"}},[s("el-button",{attrs:{size:"small"},on:{click:function(a){e.dialog_item=!1}}},[e._v("取消")]),e._v(" "),e.buttonShow?s("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(a){e.handelSubmit()}}},[e._v("确定")]):e._e()],1)],1)],1)],1)},staticRenderFns:[]};var p=t("VU/8")(i,u,!1,function(e){t("PXGo")},"data-v-bcd18258",null);a.default=p.exports}});
//# sourceMappingURL=16.ce40f09c26ed958d29b1.js.map