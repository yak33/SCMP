webpackJsonp([32],{"3FdS":function(t,a,e){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var i=e("Gu7T"),o=e.n(i),n=e("Dd8w"),r=e.n(n),s=e("gyMJ"),l=e("8KPR"),c=e("NYxO"),d={computed:r()({},Object(c.d)("database",{unitAllList:function(t){return t.unitAllList},drugWayList:function(t){return t.drugWayList},dosageList:function(t){return t.dosageList}})),data:function(){return{tableData:[{date:22,name:"abc"}],dialog_item:!1,formData:{upperlimit:"0.00",lowerlimit:"0.00"},opType:"add",total:0,title:"",buttonShow:!1,caoyaoYaoXing:[],checkFlage:"1",checkList:[],caoyaoPaozhi:[],drugmeridianList:[],drugyinmeridianList:[],drugtaste:[],tempSaveData:"",xingweiSavedData:{list:[],isSaved:!1},paozhiSavedData:{list:[],isSaved:!1},yinjingSavedData:{list:[],isSaved:!1},search:{searchText:"",pageNumber:0,pageSize:10},drugmodel:[{drugmodelcode:2,drugmodelname:"中药"},{drugmodelcode:3,drugmodelname:"中成药"},{drugmodelcode:4,drugmodelname:"卫药"}],rules:{drugname:[{required:!0,message:"请输入药品名称",trigger:"blur"}],inputcode:[{required:!0,message:"请输入输入码",trigger:"blur"}],drugcode:[{required:!0,message:"请输入药品编码",trigger:"blur"}],drugmodelname:[{required:!0,message:"请选择药品类别",trigger:"blur"}]}}},methods:{handelSubmit:function(){"add"==this.opType?this.funCheckFormData():this.handelUpdataXiYao(this.formData)},funCheckFormData:function(){var t=this;this.$refs.ruleForm.validate(function(a){a&&t.handelInsertYC(t.formData)})},getItemLabel:function(t){var a="";return t.tasteCode&&(a=t.tasteCode+":"+t.tasteName),t.meridianCode&&(a=t.meridianCode+":"+t.meridianName),t.processcode&&(a=t.processcode+":"+t.processname),a},handelTypeChange:function(t){document.querySelector(".tab-btn .tab-btn-active").className="",t.target.className="tab-btn-active",this.checkFlage=t.target.dataset.index,this.caoyaoYaoXing=[],this.checkList=[],this.handleGetYaoXing(),this.funGetCheckListData()},handleGetYaoXing:function(){console.log(this.checkList)},handelYaoXingChange:function(){console.log(this.checkList),"1"==this.checkFlage&&(this.caoyaoPaozhi=[].concat(o()(this.checkList))),"2"==this.checkFlage&&(this.drugtaste=[].concat(o()(this.checkList))),"3"==this.checkFlage&&(this.drugmeridianList=[].concat(o()(this.checkList))),"4"==this.checkFlage&&(this.drugyinmeridianList=[].concat(o()(this.checkList)))},funGetCheckListData:function(){var t=this;return"2"==this.checkFlage?(this.checkList=[].concat(o()(this.drugtaste)),this.xingweiSavedData.isSaved?void(this.caoyaoYaoXing=this.xingweiSavedData.list):void Object(s._23)({flag:0}).then(function(a){"0"==a.data.code?(t.xingweiSavedData.list=a.data.data,t.xingweiSavedData.isSaved=!0,t.caoyaoYaoXing=a.data.data):t.caoyaoYaoXing=[]})):"3"==this.checkFlage?(this.checkList=[].concat(o()(this.drugmeridianList)),this.yinjingSavedData.isSaved?void(this.caoyaoYaoXing=this.yinjingSavedData.list):void Object(s._23)({flag:1}).then(function(a){"0"==a.data.code?(t.yinjingSavedData.list=a.data.data,t.yinjingSavedData.isSaved=!0,t.caoyaoYaoXing=a.data.data):t.caoyaoYaoXing=[]})):"4"==this.checkFlage?(this.checkList=[].concat(o()(this.drugyinmeridianList)),this.yinjingSavedData.isSaved?void(this.caoyaoYaoXing=this.yinjingSavedData.list):void Object(s._23)({flag:1}).then(function(a){"0"==a.data.code?(t.yinjingSavedData.list=a.data.data,t.yinjingSavedData.isSaved=!0,t.caoyaoYaoXing=a.data.data):t.caoyaoYaoXing=[]})):"1"==this.checkFlage?(this.checkList=[].concat(o()(this.caoyaoPaozhi)),this.paozhiSavedData.isSaved?void(this.caoyaoYaoXing=this.paozhiSavedData.list):void Object(s._13)().then(function(a){"0"==a.data.code?(t.paozhiSavedData.list=a.data.data,t.paozhiSavedData.isSaved=!0,t.caoyaoYaoXing=a.data.data):t.caoyaoYaoXing=[]})):void 0},getPinCode:function(){this.formData.drugname&&(this.formData.inputcode=Object(l.a)(this.formData.drugname))},handelSelectChangeDosagename:function(t){var a=this;this.dosageList.forEach(function(e){e.dosagecode==t&&(a.formData.dosagename=e.dosagename)})},handelSelectChangeDrugwayname:function(t){var a=this;this.drugWayList.forEach(function(e){e.drugwaycode==t&&(a.formData.drugwayname=e.drugwayname)})},handelSelectChangeUnitname:function(t){var a=this;this.unitAllList.forEach(function(e){e.unitcode==t&&(a.formData.unitname=e.unitname)})},handelSelectChangeSinglemeasureunitname:function(t){var a=this;this.unitAllList.forEach(function(e){e.unitcode==t&&(a.formData.singlemeasureunitname=e.unitname)})},handelSelectChangePrescriptionunitname:function(t){var a=this;this.unitAllList.forEach(function(e){e.unitcode==t&&(a.formData.prescriptionunitname=e.unitname)})},handelAddItem:function(){this.title="新增",this.opType="add",this.formData={inputcode:"",drugmodelcode:2,drugmodelname:"中药",units:1096,unitname:"g",stopflag:!1,drugflag:0,drugname:"",othername:"",upperlimit:0,lowerlimit:0,hiscorrecode:"",lprice:"0",drugsource:"",drugfunction:"",usage:"",matterattend:"",drugattend:"",specialusage:"",drugstorage:"",remark:""},this.dialog_item=!0,this.buttonShow=!0,this.resetFields()},handelDelete:function(t){var a=this;this.$confirm("确定要执行删除操作？","操作提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){Object(s.m)({drugcode:t.drugcode}).then(function(t){"0"==t.data.code&&a.$message.success("删除成功！")}),a.tableData.splice(t,1)}).catch(function(){})},handelView:function(t){this.title="查看",this.opType="view",this.formData=r()({},t),this.funGetCheckListData(),this.dialog_item=!0},handelUpdata:function(t){this.title="修改",this.opType="edit",this.buttonShow=!0,this.formData=t,this.tempSaveData=t.drugname,this.funSetDataToSave(),this.funGetCheckListData(),this.dialog_item=!0},dialogClose:function(){this.buttonShow=!1,this.formData={},this.caoyaoPaozhi=[],this.drugtaste=[],this.drugmeridianList=[],this.drugyinmeridianList=[]},getData:function(){var t=this;Object(s.N)(this.search).then(function(a){"0"==a.data.code?(t.tableData=a.data.data.rows,t.total=a.data.data.total):(t.tableData=[],t.total=0)})},handelSelectChangeType:function(t){var a=this;this.unitAllList.forEach(function(e){e.unitcode==t&&(a.formData.drugmodelname=e.drugmodelname)})},getDataBySearch:function(){this.search.searchText&&(this.search.pageNumber=1,this.getData())},handelPageChange:function(t){this.search.pageNumber=t,this.getData()},resetFields:function(){this.$nextTick(function(){})},handelInsertYC:function(t){var a=this;this.funSetListDataToForm(),Object(s._43)(t).then(function(t){"0"==t.data.code?(a.$message.success("添加成功!"),a.getData(),a.dialog_item=!1):a.$message.error("添加失败! "+t.data.msg)})},funSetListDataToForm:function(){this.formData.drugprocess=this.caoyaoPaozhi.join(";"),this.formData.drugtaste=this.drugtaste.join(";"),this.formData.drugmeridian=this.drugmeridianList.join(";"),this.formData.drugyinmeridian=this.drugyinmeridianList.join(";")},funSetDataToSave:function(){this.caoyaoPaozhi=this.formData.drugprocess?this.formData.drugprocess.split(";"):[],this.drugtaste=this.formData.drugtaste?this.formData.drugtaste.split(";"):[],this.drugmeridianList=this.formData.drugmeridian?this.formData.drugmeridian.split(";"):[],this.drugyinmeridianList=this.formData.drugyinmeridian?this.formData.drugyinmeridian.split(";"):[]},handelUpdataXiYao:function(t){var a=this;this.formData.drugname2=this.formData.drugname,this.formData.drugname=this.tempSaveData,this.funSetListDataToForm(),Object(s._74)(t).then(function(t){"0"==t.data.code?(a.$message.success("修改成功!"),a.getData(),a.dialog_item=!1):a.$message.error("修改失败")})}},mounted:function(){this.getData(),this.funGetCheckListData()}},u={render:function(){var t=this,a=t.$createElement,i=t._self._c||a;return i("section",[i("el-row",[i("el-col",{attrs:{span:8}},[i("el-input",{attrs:{"suffix-icon":"el-icon-search",clearable:"",placeholder:"输入您想查询的药品名称/药品代码/输入码"},on:{blur:function(a){t.getDataBySearch()}},nativeOn:{keyup:function(a){if(!("button"in a)&&t._k(a.keyCode,"enter",13,a.key,"Enter"))return null;t.getData()}},model:{value:t.search.searchText,callback:function(a){t.$set(t.search,"searchText",a)},expression:"search.searchText"}})],1),t._v(" "),i("el-col",{attrs:{span:15,align:"right"}},[i("el-button",{attrs:{size:"small",type:"primary",icon:"el-icon-plus"},on:{click:t.handelAddItem}},[t._v("新 增")])],1),t._v(" "),i("el-col",{staticStyle:{"margin-top":"16px"},attrs:{span:24}},[i("el-table",{staticStyle:{width:"100%"},attrs:{data:t.tableData},on:{"cell-dblclick":t.handelView}},[i("el-table-column",{attrs:{type:"expand"},scopedSlots:t._u([{key:"default",fn:function(a){return[i("el-form",{staticClass:"demo-table-expand",attrs:{"label-position":"left",inline:""}},[i("el-form-item",{attrs:{label:"主治:"}},[i("span",[t._v(t._s(a.row.drugattend))])]),t._v(" "),i("el-form-item",{attrs:{label:"用法用量:"}},[i("span",[t._v(t._s(a.row.usage))])]),t._v(" "),i("el-form-item",{attrs:{label:"药品规格:"}},[i("span",[t._v(t._s(a.row.packageunits))])]),t._v(" "),i("el-form-item",{attrs:{label:"来源:"}},[i("span",[t._v(t._s(a.row.drugsource))])]),t._v(" "),i("el-form-item",{attrs:{label:"注意事项:"}},[i("span",[t._v(t._s(a.row.matterattend))])]),t._v(" "),i("el-form-item",{attrs:{label:"药品售价:"}},[i("span",[t._v(t._s(a.row.lprice))])]),t._v(" "),i("el-form-item",{attrs:{label:"药量上限:"}},[i("span",[t._v(t._s(a.row.upperlimit))])]),t._v(" "),i("el-form-item",{attrs:{label:"药量下限:"}},[i("span",[t._v(t._s(a.row.lowerlimit))])]),t._v(" "),i("el-form-item",{attrs:{label:"HIS对应编码:"}},[i("span",[t._v(t._s(a.row.hiscorrecode))])]),t._v(" "),i("el-form-item",{attrs:{label:"单位名称:"}},[i("span",[t._v(t._s(a.row.unitname))])])],1)]}}])}),t._v(" "),i("el-table-column",{attrs:{prop:"drugcode",label:"药品编码",width:"100"}}),t._v(" "),i("el-table-column",{attrs:{prop:"drugname",label:"药品名称",width:"180"}}),t._v(" "),i("el-table-column",{attrs:{prop:"othername","show-overflow-tooltip":"",label:"药品别名"}}),t._v(" "),i("el-table-column",{attrs:{prop:"drugfunction",label:"药品功能"}}),t._v(" "),i("el-table-column",{attrs:{prop:"inputcode",label:"输入码"}}),t._v(" "),i("el-table-column",{attrs:{label:"操作","header-align":"center",width:"120"},scopedSlots:t._u([{key:"default",fn:function(a){return[i("el-button-group",[i("span",{staticClass:"icon-button-img",on:{click:function(e){t.handelDelete(a.row)}}},[i("img",{attrs:{src:e("DKbd")}})]),t._v(" "),i("span",{staticClass:"icon-button-img",on:{click:function(e){t.handelUpdata(a.row)}}},[i("img",{attrs:{src:e("4g3x")}})])])]}}])})],1)],1),t._v(" "),i("el-col",{staticClass:"toolbar",attrs:{span:24}},[i("el-pagination",{staticStyle:{float:"right"},attrs:{background:"",layout:"total, prev, pager, next, jumper","current-page":t.search.pageNumber,"page-size":t.search.pageSize,total:t.total},on:{"current-change":t.handelPageChange}})],1)],1),t._v(" "),i("el-dialog",{attrs:{title:"中药管理 "+t.title,center:"",width:"80%",fullscreen:"",visible:t.dialog_item},on:{close:t.dialogClose,"update:visible":function(a){t.dialog_item=a}}},[i("el-form",{ref:"ruleForm",attrs:{model:t.formData,"label-width":"100px",rules:t.rules}},[i("el-row",[i("el-col",{attrs:{span:8}},[i("el-form-item",{attrs:{label:"药品编码"}},[i("el-input",{attrs:{disabled:""},model:{value:t.formData.drugcode,callback:function(a){t.$set(t.formData,"drugcode",a)},expression:"formData.drugcode"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"药品类别",prop:"drugmodelname"}},[i("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择"},on:{change:t.handelSelectChangeType},model:{value:t.formData.drugmodelcode,callback:function(a){t.$set(t.formData,"drugmodelcode",a)},expression:"formData.drugmodelcode"}},t._l(t.drugmodel,function(t){return i("el-option",{key:t.drugmodelcode,attrs:{label:t.drugmodelname,value:t.drugmodelcode}})}))],1),t._v(" "),i("el-form-item",{attrs:{label:"单位",prop:"units"}},[i("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择"},on:{change:t.handelSelectChangeUnitname},model:{value:t.formData.units,callback:function(a){t.$set(t.formData,"units",a)},expression:"formData.units"}},t._l(t.unitAllList,function(t){return i("el-option",{key:t.unitcode,attrs:{label:t.unitname,value:t.unitcode}})}))],1),t._v(" "),i("el-form-item",{attrs:{label:"药量上限"}},[i("el-input-number",{staticStyle:{width:"100%"},attrs:{"controls-position":"right",precision:2,min:0,max:100},model:{value:t.formData.upperlimit,callback:function(a){t.$set(t.formData,"upperlimit",a)},expression:"formData.upperlimit"}})],1)],1),t._v(" "),i("el-col",{attrs:{span:8}},[i("el-form-item",{attrs:{label:"药品名称",prop:"drugname"}},[i("el-input",{on:{blur:t.getPinCode},model:{value:t.formData.drugname,callback:function(a){t.$set(t.formData,"drugname",a)},expression:"formData.drugname"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"药品别名"}},[i("el-input",{model:{value:t.formData.othername,callback:function(a){t.$set(t.formData,"othername",a)},expression:"formData.othername"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"药品售价"}},[i("el-input",{model:{value:t.formData.lprice,callback:function(a){t.$set(t.formData,"lprice",a)},expression:"formData.lprice"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"药量下限"}},[i("el-input-number",{staticStyle:{width:"100%"},attrs:{"controls-position":"right",precision:2,min:0,max:100},model:{value:t.formData.lowerlimit,callback:function(a){t.$set(t.formData,"lowerlimit",a)},expression:"formData.lowerlimit"}})],1)],1),t._v(" "),i("el-col",{attrs:{span:8}},[i("el-form-item",{attrs:{label:"输入码",prop:"inputcode"}},[i("el-input",{model:{value:t.formData.inputcode,callback:function(a){t.$set(t.formData,"inputcode",a)},expression:"formData.inputcode"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"HIS对应编码"}},[i("el-input",{model:{value:t.formData.hiscorrecode,callback:function(a){t.$set(t.formData,"hiscorrecode",a)},expression:"formData.hiscorrecode"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"停用"}},[i("el-checkbox",{model:{value:t.formData.stopflag,callback:function(a){t.$set(t.formData,"stopflag",a)},expression:"formData.stopflag"}})],1)],1),t._v(" "),i("el-col",[i("el-form-item",{attrs:{label:"来源"}},[i("el-input",{model:{value:t.formData.drugsource,callback:function(a){t.$set(t.formData,"drugsource",a)},expression:"formData.drugsource"}})],1)],1)],1),t._v(" "),i("el-row",{staticClass:"select-list-box"},[i("el-col",{staticClass:"tab-btn",attrs:{span:14}},[i("span",{staticClass:"tab-btn-active",attrs:{"data-index":"1"},on:{click:t.handelTypeChange}},[t._v("炮制")]),t._v(" "),i("span",{attrs:{"data-index":"2"},on:{click:t.handelTypeChange}},[t._v("性味")]),t._v(" "),i("span",{attrs:{"data-index":"3"},on:{click:t.handelTypeChange}},[t._v("归经")]),t._v(" "),i("span",{attrs:{"data-index":"4"},on:{click:t.handelTypeChange}},[t._v("引经")])]),t._v(" "),t.caoyaoYaoXing.length>0?i("el-col",{staticClass:"select-caoyao",attrs:{span:24}},[i("div",{staticClass:"caoyao-item"},[i("el-checkbox-group",{staticClass:"caoyao-yaoxing-list",on:{change:t.handelYaoXingChange},model:{value:t.checkList,callback:function(a){t.checkList=a},expression:"checkList"}},t._l(t.caoyaoYaoXing,function(a){return i("el-checkbox",{key:a.meridianCode,attrs:{label:t.getItemLabel(a)}})}))],1)]):t._e()],1),t._v(" "),i("el-row",{staticStyle:{"margin-top":"18px"}},[i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:"功能"}},[i("el-input",{attrs:{type:"textarea"},model:{value:t.formData.drugfunction,callback:function(a){t.$set(t.formData,"drugfunction",a)},expression:"formData.drugfunction"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"用法用量"}},[i("el-input",{attrs:{type:"textarea"},model:{value:t.formData.usage,callback:function(a){t.$set(t.formData,"usage",a)},expression:"formData.usage"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"注意事项"}},[i("el-input",{attrs:{type:"textarea"},model:{value:t.formData.matterattend,callback:function(a){t.$set(t.formData,"matterattend",a)},expression:"formData.matterattend"}})],1)],1),t._v(" "),i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:"主治"}},[i("el-input",{attrs:{type:"textarea"},model:{value:t.formData.drugattend,callback:function(a){t.$set(t.formData,"drugattend",a)},expression:"formData.drugattend"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"特殊用法"}},[i("el-input",{attrs:{type:"textarea"},model:{value:t.formData.specialusage,callback:function(a){t.$set(t.formData,"specialusage",a)},expression:"formData.specialusage"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"贮藏"}},[i("el-input",{attrs:{type:"textarea"},model:{value:t.formData.drugstorage,callback:function(a){t.$set(t.formData,"drugstorage",a)},expression:"formData.drugstorage"}})],1)],1),t._v(" "),i("el-col",{attrs:{span:24}},[i("el-form-item",{attrs:{label:"备注"}},[i("el-input",{attrs:{type:"textarea"},model:{value:t.formData.remark,callback:function(a){t.$set(t.formData,"remark",a)},expression:"formData.remark"}})],1)],1),t._v(" "),i("el-col",{staticClass:"toolbar",attrs:{align:"center"}},[i("el-button",{attrs:{size:"small"},on:{click:function(a){t.dialog_item=!1}}},[t._v("取消")]),t._v(" "),t.buttonShow?i("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(a){t.handelSubmit()}}},[t._v("确定")]):t._e()],1)],1)],1)],1)],1)},staticRenderFns:[]};var m=e("VU/8")(d,u,!1,function(t){e("uJgm")},"data-v-461168e2",null);a.default=m.exports},uJgm:function(t,a){}});
//# sourceMappingURL=32.af38f8f956a092951853.js.map