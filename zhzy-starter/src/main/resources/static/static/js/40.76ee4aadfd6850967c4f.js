webpackJsonp([40],{"+gTZ":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a("Gu7T"),n=a.n(i),l=a("Dd8w"),s=a.n(l),o=a("gyMJ"),c=a("yxdh"),r=a("CmOP"),d=a("NYxO"),u={components:{"acupoin-img":c.a,"jingyan-bar":r.a},computed:s()({},Object(d.d)("caseNote",{pro_cureCode:function(e){return e.cureCode},pro_dialecticalCode:function(e){return e.dialecticalCode}}),Object(d.d)("patient",{empBasicMainID:function(e){return e.empBasicMainID},registrationNum:function(e){return e.registrationNum}}),{xueweiListData:{get:function(){return 1===this.tagIndex?[].concat(n()(this.xueweiData),n()(this.zjItem)):2===this.tagIndex?this.kaixueData:3===this.tagIndex?this.bixueData:void 0},set:function(){return this.xueweiListData}},isShowAdd:function(){return 2==this.tagIndex},isShowRemmove:function(){return 1==this.tagIndex},canvasListData:function(){return this.xueweiData}}),data:function(){return{tagIndex:1,xueweiData:[],kaixueData:[],bixueData:[],xuejieObj:{},dialogXueWei:!1,xueweiAddListData:[],searchTextWuewei:"",kauxueTime:{timer:null,jsTime:null,timebar:100},timer:null,zjMinutes:"10",dialog_chineseMedicine:!1,dialog_xiyi:!1,xyData:[],zyData:[],searchXY:"",searchZY:"",chineseMedicineName:"",chineseMedicineCode:"",westernMedicineName:"",westernMedicineCode:"",lzData:[],fangjie:{},rowSign:{},zjItem:[],zj_mainSymptomName:"",zj_diseaseName:"",zj_tongueName:"",zj_pulseName:"",imgSrc:""}},methods:{getJingYanCode:function(e){this.lzData.push(e)},handelOpenjingyan:function(){this.$refs.getJingYan.jingyanOpenDialog()},handelSaveJingYan:function(){var e=[].concat(n()(this.xueweiData),n()(this.zjItem));this.$refs.getJingYan.jingyanSaveJingYan(e)},handelYaoFangTableSelection:function(e,t){var a=this;if(this.$refs.yfTable.clearSelection(),this.rowSign===t)return this.rowSign={},void(this.zjItem=[]);this.rowSign=t,this.$refs.yfTable.toggleRowSelection(t),Object(o.v)({prescriptionCode:t.prescriptionCode}).then(function(e){a.zjItem=e.data.data})},handelGetFangJie:function(e){var t=this;this.fangjieActive!=e.prescriptionCode&&(this.fangjie=[],this.fangjieActive=e.prescriptionCode,Object(o.B)({prescriptionCode:e.prescriptionCode}).then(function(e){"0"==e.data.code&&(t.fangjie=e.data.data[0])}))},handelSelectXY:function(){this.dialog_xiyi=!0,this.searchXY="",this.handelSearchXY()},handelSearchXY:function(){var e=this;Object(o.z)({searchText:this.searchXY}).then(function(t){e.xyData=t.data.data})},handelSelectXiYi:function(e){this.dialog_xiyi=!1,this.westernMedicineName=e.westernMedicineName,this.westernMedicineCode=e.westernMedicineCode},handelSelectZYi:function(e){this.chineseMedicineName=e.chineseMedicineName,this.chineseMedicineCode=e.chineseMedicineCode,this.dialog_chineseMedicine=!1},handelSelectZY:function(){this.searchZY="",this.dialog_chineseMedicine=!0,this.handelSearchZY()},handelSearchZY:function(){var e=this;Object(o._62)({searchText:this.searchZY}).then(function(t){e.zyData=t.data.data})},handelFinish:function(e){var t=this;0!=this.xueweiListData.length?Object(o._79)({empBasicMainID:this.empBasicMainID,registrationNum:this.registrationNum,zjMinutes:this.zjMinutes,fangJiDetailList:this.xueweiListData,westernMedicineCode:this.westernMedicineCode,chineseMedicineCode:this.chineseMedicineCode,flag:e}).then(function(a){"0"===a.data.code?(t.$message.success("保存成功!"),"1"==e&&t.$router.push("list")):t.$message.error("保存失败!")}):this.$message.error("穴位不能为空!")},handelSelectTag:function(e,t){this.tagIndex=e,document.querySelector(".zj-xuewei .active").className="",t.target.className="active"},handelGetXueJie:function(e){var t=this;e.acupointCode!=this.xuejieObj.acupointCode&&Object(o.Q)({acupointCode:e.acupointCode}).then(function(e){t.xuejieObj=e.data.data[0]})},handelRemoveXue:function(e,t){e<this.xueweiData.length&&0!=this.xueweiData.length?this.xueweiData.splice(e,1):this.zjItem.splice(e-this.xueweiData.length,1)},handelAddXue:function(e,t){this.$message.success(t.acupointName+" 穴位添加成功！"),this.xueweiData.push(t)},handelDialogAddxuewei:function(){this.dialogXueWei=!0,this.getAllAcupointList()},getAllAcupointList:function(){var e=this;Object(o.w)({searchText:this.searchTextWuewei}).then(function(t){"0"===t.data.code&&(e.xueweiAddListData=t.data.data)})},handelDbclickAddxuewei:function(e,t){this.xueweiData.find(function(t){return e===t})?this.$message.warning("穴位["+e.acupointName+"]已存在列表!"):(this.xueweiData.push(e),this.$message.success(e.acupointName+" 穴位添加成功！"))},getInitListData:function(){var e=this;Object(o._5)().then(function(t){"0"==t.data.code&&(e.kaixueData=t.data.data)}),Object(o.A)().then(function(t){"0"==t.data.code&&(e.bixueData=t.data.data)}),Object(o.T)().then(function(t){"0"==t.data.code&&(e.kauxueTime=s()({},t.data.data,e.kauxueTime),e.timerKaixueEnd())})},timerKaixueEnd:function(){var e=this;this.timer=setInterval(function(){e.kauxueTime.timebar<=0?window.clearInterval(e.timer):e.kauxueTime.timebar=parseInt(e.kauxueTime.timebar-e.kauxueTime.txtPointIfOpenEndTime/100)},6e4)}},mounted:function(){var e=this;this.getInitListData(),Object(o._1)({empBasicMainID:this.empBasicMainID,operationType:1}).then(function(t){"0"===t.data.code&&(e.lzData=t.data.data)})},created:function(){this.zj_mainSymptomName=sessionStorage.getItem("zj_mainSymptomName")||"",this.zj_diseaseName=sessionStorage.getItem("zj_diseaseName")||"",this.zj_tongueName=sessionStorage.getItem("zj_tongueName")||"",this.zj_pulseName=sessionStorage.getItem("zj_pulseName")||"",this.imgSrc=sessionStorage.getItem("zy_imgSrc")||""}},h={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("section",[i("el-row",[i("el-col",{attrs:{span:4}},[i("span",{staticClass:"top-nav-link",on:{click:function(t){e.goBack()}}},[e._v("返回上一页")])])],1),e._v(" "),i("el-row",[i("el-col",{attrs:{span:20}},[i("el-form",{attrs:{"label-width":"40px"}},[i("el-row",[i("el-col",{attrs:{span:7}},[i("el-form-item",{attrs:{label:"主症"}},[i("el-input",{attrs:{readonly:""},model:{value:e.zj_mainSymptomName,callback:function(t){e.zj_mainSymptomName=t},expression:"zj_mainSymptomName"}})],1)],1),e._v(" "),i("el-col",{attrs:{offset:1,span:8}},[i("el-form-item",{attrs:{label:"兼症"}},[i("div",[i("el-input",{staticStyle:{position:"absolute"},attrs:{readonly:"",rows:4,type:"textarea"},model:{value:e.zj_diseaseName,callback:function(t){e.zj_diseaseName=t},expression:"zj_diseaseName"}})],1)])],1),e._v(" "),i("el-col",{attrs:{offset:1,span:7}},[i("el-form-item",{attrs:{label:"舌相"}},[i("el-input",{attrs:{readonly:""},model:{value:e.zj_tongueName,callback:function(t){e.zj_tongueName=t},expression:"zj_tongueName"}})],1)],1),e._v(" "),i("el-col",{attrs:{span:7}},[i("el-form-item",{attrs:{label:"脉相"}},[i("el-input",{attrs:{readonly:""},model:{value:e.zj_pulseName,callback:function(t){e.zj_pulseName=t},expression:"zj_pulseName"}})],1)],1)],1)],1)],1),e._v(" "),i("el-col",{attrs:{span:4}},[i("img",{staticStyle:{width:"120px","margin-left":"12px"},attrs:{src:e.imgSrc}})])],1),e._v(" "),i("el-row",{staticClass:"border-box"},[i("el-col",{attrs:{align:"center"}},[i("span",{staticClass:"box-title"},[e._v("论治结果")])]),e._v(" "),i("el-col",{staticStyle:{"margin-top":"8px"}},[i("el-table",{ref:"yfTable",attrs:{data:e.lzData},on:{select:e.handelYaoFangTableSelection}},[i("el-table-column",{attrs:{type:"selection"}}),e._v(" "),i("el-table-column",{attrs:{label:"症型",prop:"dialecticalName"}}),e._v(" "),i("el-table-column",{attrs:{label:"治法",prop:"cureName"}}),e._v(" "),i("el-table-column",{attrs:{label:"方剂名称",prop:"prescriptionName"}}),e._v(" "),i("el-table-column",{attrs:{label:"推荐",prop:"subID"}}),e._v(" "),i("el-table-column",{attrs:{label:"方解"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("el-popover",{attrs:{placement:"left-end",width:"420",trigger:"hover"}},[i("div",[i("div",[e._v("【方解】 "+e._s(e.fangjie.calcite))]),e._v(" "),i("div",[e._v("【来源】 "+e._s(e.fangjie.source))]),e._v(" "),i("div",[e._v("【功效】 "+e._s(e.fangjie.effect))]),e._v(" "),i("div",[e._v("【主治】 "+e._s(e.fangjie.attend))])]),e._v(" "),i("img",{staticClass:"chufang-icon",attrs:{slot:"reference",src:a("uHXg")},on:{mouseover:function(a){e.handelGetFangJie(t.row)}},slot:"reference"})])]}}])})],1)],1)],1),e._v(" "),i("el-row",{staticStyle:{"margin-top":"20px"}},[i("el-col",{attrs:{span:14}},[i("el-row",{staticClass:"zj-xuewei"},[i("el-col",{attrs:{span:12}},[i("span",{staticClass:"active",on:{click:function(t){e.handelSelectTag(1,t)}}},[e._v("穴位")]),e._v(" "),i("span",{on:{click:function(t){e.handelSelectTag(2,t)}}},[e._v("开穴")]),e._v(" "),i("span",{on:{click:function(t){e.handelSelectTag(3,t)}}},[e._v("闭穴")])]),e._v(" "),i("el-col",{attrs:{span:11,align:"right"}},[i("el-button",{attrs:{size:"mini",type:"primary",icon:"el-icon-plus"},on:{click:e.handelDialogAddxuewei}},[e._v("添加")])],1),e._v(" "),i("el-col",{staticStyle:{"margin-top":"8px"},attrs:{span:24}},[i("el-table",{attrs:{data:e.xueweiListData,height:"368"}},[i("el-table-column",{attrs:{type:"index",width:"40"}}),e._v(" "),i("el-table-column",{attrs:{prop:"acupointName",width:"80px",label:"穴位"}}),e._v(" "),i("el-table-column",{attrs:{prop:"positionExplain","min-width":"240px",label:"穴位说明"}}),e._v(" "),i("el-table-column",{attrs:{label:"穴解",width:"80px"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("el-popover",{attrs:{placement:"right-end",width:"420",trigger:"hover"}},[i("div",[i("div",[e._v("【穴位说明】 "+e._s(e.xuejieObj.positionExplain))]),e._v(" "),i("div",[e._v("【X坐标】 "+e._s(e.xuejieObj.pointX))]),e._v(" "),i("div",[e._v("【Y坐标】 "+e._s(e.xuejieObj.pointY))]),e._v(" "),i("div",[e._v("【所属经络】"+e._s(e.xuejieObj.meridianName))]),e._v(" "),i("div",[e._v("【在经络上的顺序】"+e._s(e.xuejieObj.meridianOrder))])]),e._v(" "),i("img",{staticClass:"chufang-icon",attrs:{slot:"reference",src:a("uHXg")},on:{mouseover:function(a){e.handelGetXueJie(t.row)}},slot:"reference"})])]}}])}),e._v(" "),i("el-table-column",{attrs:{prop:"name",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[e.isShowRemmove?i("el-button",{attrs:{type:"danger",size:"mini",icon:"el-icon-delete"},on:{click:function(a){e.handelRemoveXue(t.$index)}}}):e._e(),e._v(" "),i("el-button",{directives:[{name:"show",rawName:"v-show",value:e.isShowAdd,expression:"isShowAdd"}],attrs:{type:"danger",size:"mini",icon:"el-icon-plus",circle:""},on:{click:function(a){e.handelAddXue(t.$index,t.row)}}})]}}])})],1)],1)],1),e._v(" "),i("el-row",{staticStyle:{"margin-top":"16px","font-size":"16px"}},[i("el-col",{staticClass:"time-bar bar-left",attrs:{span:4}},[i("span",[e._v("开穴时间")])]),e._v(" "),i("el-col",{staticClass:"time-bar bar-right",attrs:{span:20}},[e._v("\n          "+e._s(e.kauxueTime.effectiveTime)+"\n        ")]),e._v(" "),i("el-col",{staticStyle:{"margin-top":"16px"},attrs:{span:24}},[i("el-progress",{attrs:{"text-inside":!0,"stroke-width":24,percentage:e.kauxueTime.timebar,color:"rgba(233, 190, 147, 1)"}})],1),e._v(" "),i("el-col",{staticStyle:{"margin-top":"16px","line-height":"36px"},attrs:{span:24}},[i("el-col",{attrs:{span:4}},[e._v("留针时间")]),e._v(" "),i("el-col",{attrs:{span:4}},[i("el-input",{model:{value:e.zjMinutes,callback:function(t){e.zjMinutes=t},expression:"zjMinutes"}})],1),e._v(" "),i("el-col",{attrs:{span:4}},[e._v("   分钟")])],1),e._v(" "),i("el-col",{staticStyle:{"margin-top":"22px"}},[i("el-form",{attrs:{"label-width":"80px"}},[i("el-form-item",{attrs:{label:"西医病名"}},[i("el-input",{attrs:{readonly:"",placeholder:"请选择西医名称"},model:{value:e.westernMedicineName,callback:function(t){e.westernMedicineName=t},expression:"westernMedicineName"}},[i("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:e.handelSelectXY},slot:"append"})],1)],1),e._v(" "),i("el-form-item",{attrs:{label:"中医病名"}},[i("el-input",{attrs:{readonly:"",placeholder:"请选择中医病名"},model:{value:e.chineseMedicineName,callback:function(t){e.chineseMedicineName=t},expression:"chineseMedicineName"}},[i("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:e.handelSelectZY},slot:"append"})],1)],1)],1)],1)],1)],1),e._v(" "),i("el-col",{attrs:{offset:1,span:9}},[i("acupoin-img",{attrs:{dataList:e.xueweiListData}})],1)],1),e._v(" "),i("el-row",{staticClass:"toolbar"},[i("el-col",{attrs:{span:12,align:"left"}},[i("el-button",{attrs:{type:"primary"},on:{click:e.handelOpenjingyan}},[e._v("取经验方")]),e._v(" "),i("el-button",{attrs:{type:"primary"},on:{click:e.handelSaveJingYan}},[e._v("存经验方")])],1),e._v(" "),i("el-col",{attrs:{span:12,align:"right"}},[i("el-button",{attrs:{type:"primary"},on:{click:function(t){e.handelFinish(0)}}},[e._v("保存就诊")]),e._v(" "),i("el-button",{attrs:{type:"primary"},on:{click:function(t){e.handelFinish(1)}}},[e._v("完成就诊")])],1)],1),e._v(" "),i("jingyan-bar",{ref:"getJingYan",on:{jingyanCode:e.getJingYanCode}}),e._v(" "),i("el-dialog",{attrs:{width:"50%",title:"添加穴位",center:"",visible:e.dialogXueWei},on:{"update:visible":function(t){e.dialogXueWei=t}}},[i("el-row",[i("el-col",{attrs:{offset:5,span:14}},[i("el-input",{attrs:{"suffix-icon":"el-icon-search",placeholder:"输入您想查询的穴位编码、名称、拼音码"},nativeOn:{keydown:function(t){return"button"in t||!e._k(t.keyCode,"enter",13,t.key,"Enter")?e.getAllAcupointList(t):null}},model:{value:e.searchTextWuewei,callback:function(t){e.searchTextWuewei=t},expression:"searchTextWuewei"}})],1),e._v(" "),i("el-col",{staticStyle:{"margin-top":"10px"},attrs:{span:24}},[i("el-table",{attrs:{data:e.xueweiAddListData,width:"100%",height:"500"},on:{"cell-dblclick":e.handelDbclickAddxuewei}},[i("el-table-column",{attrs:{label:"编码",prop:"acupointCode"}}),e._v(" "),i("el-table-column",{attrs:{label:"名称",prop:"acupointName"}}),e._v(" "),i("el-table-column",{attrs:{label:"拼音码",prop:"pinYinCode"}})],1)],1)],1)],1),e._v(" "),i("el-dialog",{attrs:{visible:e.dialog_xiyi,width:"60%"},on:{"update:visible":function(t){e.dialog_xiyi=t}}},[i("el-row",[i("el-col",{attrs:{span:12,offset:6}},[i("el-input",{attrs:{clearable:"",placeholder:"请输入您想要查询的病名或拼音码","prefix-icon":"el-icon-search"},on:{blur:e.handelSearchXY},nativeOn:{keydown:function(t){return"button"in t||!e._k(t.keyCode,"enter",13,t.key,"Enter")?e.handelSearchXY(t):null}},model:{value:e.searchXY,callback:function(t){e.searchXY=t},expression:"searchXY"}})],1),e._v(" "),i("el-col",{staticStyle:{"margin-top":"26px"}},[i("el-table",{staticStyle:{width:"100%"},attrs:{height:"480",data:e.xyData},on:{"row-dblclick":e.handelSelectXiYi}},[i("el-table-column",{attrs:{"header-align":"center",align:"center",width:"120",prop:"westernMedicineCode",label:"西医编码"}}),e._v(" "),i("el-table-column",{attrs:{"header-align":"center",align:"center",prop:"westernMedicineName",label:"西医病名"}}),e._v(" "),i("el-table-column",{attrs:{"header-align":"center",align:"center",prop:"pinYinCode",label:"拼音码"}})],1)],1)],1)],1),e._v(" "),i("el-dialog",{attrs:{visible:e.dialog_chineseMedicine,width:"60%"},on:{"update:visible":function(t){e.dialog_chineseMedicine=t}}},[i("el-row",[i("el-col",{attrs:{span:12,offset:6}},[i("el-input",{attrs:{clearable:"",placeholder:"请输入您想要查询的病名或拼音码","prefix-icon":"el-icon-search"},on:{blur:e.handelSearchZY},nativeOn:{keydown:function(t){return"button"in t||!e._k(t.keyCode,"enter",13,t.key,"Enter")?e.handelSearchZY(t):null}},model:{value:e.searchZY,callback:function(t){e.searchZY=t},expression:"searchZY"}})],1),e._v(" "),i("el-col",{staticStyle:{"margin-top":"26px"}},[i("el-table",{staticStyle:{width:"100%"},attrs:{data:e.zyData,height:"480"},on:{"row-dblclick":e.handelSelectZYi}},[i("el-table-column",{attrs:{"header-align":"right",align:"right",width:"120",prop:"chineseMedicineCode",label:"中医编码"}}),e._v(" "),i("el-table-column",{attrs:{"header-align":"center",align:"center",prop:"chineseMedicineName",label:"中医病名"}}),e._v(" "),i("el-table-column",{attrs:{"header-align":"center",align:"center",prop:"pinYinCode",label:"拼音码"}})],1)],1)],1)],1)],1)},staticRenderFns:[]};var p=a("VU/8")(u,h,!1,function(e){a("JtwS")},"data-v-19289803",null);t.default=p.exports},JtwS:function(e,t){}});
//# sourceMappingURL=40.76ee4aadfd6850967c4f.js.map