webpackJsonp([25],{"5rYB":function(t,e){},zH0z:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=a("Dd8w"),s=a.n(n),i=a("gyMJ"),o=a("XLwt"),r=a.n(o),c={data:function(){return{listData:[],activeName:"all",incomeData:[],nameListEchats:[],herbalmoneyListEchats:[],acupuncturemoneyListEchats:[],westernmoneyListEchats:[],inspectionmoneyListEchats:[],checkmoneyListEcharts:[],echartsOption:{},datePicker:"",pickerOptions2:"",myChart:null,total:0,tableArgs:{searchText:"",pageSize:99999,pageNumber:1}}},methods:{handleClick:function(t){this.funDraw()},funDraw:function(){"income"==this.activeName&&(this.funDataToIncom(),this.funObjToEchatsList(),this.funEcartsInit()),"number"==this.activeName&&(this.funDataToIncom(),this.funObjToEchatsList(),this.funEcartsNumber())},funNullToZero:function(t,e,a,n){return null==a?"0":a},funGetDateOnly:function(t,e,a,n){if(a)return a.split(" ")[0]},funEcartsNumber:function(){var t=r.a.init(document.querySelector("#number")),e=s()({},this.echartsOption);e.legend.data=[],e.series={name:"就诊统计",type:"bar",barWidth:"40",data:[]},this.incomeData.forEach(function(t){e.legend.data.push(t.deptname),e.series.data.push(t.outpatientcount)}),console.log(e),t.setOption(e)},funEcartsInit:function(){this.myChart=r.a.init(document.querySelector("#main")),this.myChart.setOption(this.echartsOption)},funDataToIncom:function(){var t=this;this.incomeData=[],this.listData.forEach(function(e){t.incomeData.find(function(t){return t.usercode==e.usercode&&(t.herbalmoney+=e.herbalmoney,t.acupuncturemoney+=e.acupuncturemoney,t.westernmoney+=e.westernmoney,t.inspectionmoney+=e.inspectionmoney,t.checkmoney+=e.checkmoney,t.outpatientcount+=e.outpatientcount,!0)})||t.incomeData.push({usercode:e.usercode,username:e.username,herbalmoney:0,acupuncturemoney:0,westernmoney:0,inspectionmoney:0,checkmoney:0,outpatientcount:0})})},funObjToEchatsList:function(){var t=this;this.nameListEchats=[],this.herbalmoneyListEchats=[],this.acupuncturemoneyListEchats=[],this.westernmoneyListEchats=[],this.inspectionmoneyListEchats=[],this.incomeData.forEach(function(e){t.nameListEchats.push(e.username),t.herbalmoneyListEchats.push(e.herbalmoney),t.acupuncturemoneyListEchats.push(e.acupuncturemoney),t.westernmoneyListEchats.push(e.westernmoney),t.inspectionmoneyListEchats.push(e.inspectionmoney),t.checkmoneyListEcharts.push(e.checkmoney)}),this.echartsOption={tooltip:{show:!0},legend:{data:["草药金额","针灸金额","西药金额","检验金额","检查金额"]},xAxis:[{type:"category",data:this.nameListEchats}],yAxis:[{type:"value"}],series:[{name:"草药金额",type:"bar",data:this.herbalmoneyListEchats},{name:"针灸金额",type:"bar",data:this.acupuncturemoneyListEchats},{name:"西药金额",type:"bar",data:this.westernmoneyListEchats},{name:"检验金额",type:"bar",data:this.inspectionmoneyListEchats},{name:"检查金额",type:"bar",data:this.checkmoneyListEcharts}]}},handleSearch:function(){this.tableArgs.pageNumber=1,this.funGetListData()},handlePageChange:function(t){this.tableArgs.pageNumber=t,this.funGetListData()},funGetListData:function(){var t=this,e=s()({userCode:sessionStorage.getItem("usercode")},this.tableArgs);this.datePicker&&(e=s()({beginDate:this.datePicker[0]?this.datePicker[0]:null,endDate:this.datePicker[1]?this.datePicker[1]:null},e)),Object(i.I)(e).then(function(e){"0"==e.data.code?(t.listData=e.data.data.rows,t.total=e.data.data.total):(t.listData=[],t.total=0)})}},mounted:function(){}},l={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("section",[a("el-tabs",{on:{"tab-click":t.handleClick},model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[a("el-tab-pane",{attrs:{label:"列表分析",name:"all"}}),t._v(" "),a("el-tab-pane",{attrs:{label:"金额图表",name:"income"}}),t._v(" "),a("el-tab-pane",{attrs:{label:"门诊数图表",name:"number"}})],1),t._v(" "),a("el-row",[a("el-col",{staticClass:"top-bar-label",attrs:{span:2}},[t._v("筛选字段")]),t._v(" "),a("el-col",{attrs:{span:6}},[a("el-input",{attrs:{"suffix-icon":"el-icon-search",clearable:"",placeholder:"请输入挂号序号、就诊号、姓名查询"},model:{value:t.tableArgs.searchText,callback:function(e){t.$set(t.tableArgs,"searchText",e)},expression:"tableArgs.searchText"}})],1),t._v(" "),a("el-col",{staticClass:"top-bar-label",attrs:{span:2}},[t._v("时间范围")]),t._v(" "),a("el-col",{attrs:{span:8}},[a("el-date-picker",{attrs:{type:"daterange",align:"right","unlink-panels":"","value-format":"yyyy-MM-dd","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:t.datePicker,callback:function(e){t.datePicker=e},expression:"datePicker"}})],1),t._v(" "),a("el-col",{attrs:{offset:2,span:3}},[a("el-button",{attrs:{type:"primary",size:"medium"},on:{click:t.handleSearch}},[t._v("查询")])],1)],1),t._v(" "),a("el-row",{directives:[{name:"show",rawName:"v-show",value:"all"==t.activeName,expression:"activeName == 'all'"}],staticStyle:{"margin-top":"24px"}},[a("el-col",[a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.listData}},[a("el-table-column",{attrs:{prop:"registrationnum",label:"挂号序号",width:"120"}}),t._v(" "),a("el-table-column",{attrs:{prop:"mecidalnum",label:"就诊号",width:"120"}}),t._v(" "),a("el-table-column",{attrs:{prop:"emname",label:"姓名"}}),t._v(" "),a("el-table-column",{attrs:{prop:"onsetdate",label:"日期",formatter:t.funGetDateOnly}}),t._v(" "),a("el-table-column",{attrs:{prop:"username",label:"医生",width:"100"}}),t._v(" "),a("el-table-column",{attrs:{prop:"deptname",label:"科室",width:"100"}}),t._v(" "),a("el-table-column",{attrs:{prop:"herbalmoney",formatter:t.funNullToZero,label:"草药金额",width:"80"}}),t._v(" "),a("el-table-column",{attrs:{prop:"acupuncturemoney",formatter:t.funNullToZero,label:"针灸金额",width:"80"}}),t._v(" "),a("el-table-column",{attrs:{prop:"westernmoney",formatter:t.funNullToZero,label:"西药金额",width:"80"}}),t._v(" "),a("el-table-column",{attrs:{prop:"inspectionmoney",formatter:t.funNullToZero,label:"检验金额",width:"80"}}),t._v(" "),a("el-table-column",{attrs:{prop:"checkmoney",formatter:t.funNullToZero,label:"检查金额",width:"80"}})],1)],1),t._v(" "),a("el-col")],1),t._v(" "),a("el-row",{directives:[{name:"show",rawName:"v-show",value:"income"==t.activeName,expression:"activeName == 'income'"}],staticStyle:{"margin-top":"24px"}},[a("el-col",{attrs:{span:24}},[a("div",{staticStyle:{width:"1000px",height:"300px",margin:"20px auto"},attrs:{id:"main"}})])],1),t._v(" "),a("el-row",{directives:[{name:"show",rawName:"v-show",value:"number"==t.activeName,expression:"activeName == 'number'"}],staticStyle:{"margin-top":"24px"}},[a("el-col",{attrs:{span:24}},[a("div",{staticStyle:{width:"1000px",height:"300px",margin:"20px auto"},attrs:{id:"number"}})])],1)],1)},staticRenderFns:[]};var u=a("VU/8")(c,l,!1,function(t){a("5rYB")},"data-v-61b8dfb2",null);e.default=u.exports}});
//# sourceMappingURL=25.a7f89aeef842ab349e4e.js.map