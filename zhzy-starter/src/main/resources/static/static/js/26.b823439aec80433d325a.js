webpackJsonp([26],{EcGx:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=i("Gu7T"),n=i.n(a),l=i("Dd8w"),s=i.n(l),c=i("gyMJ"),o=i("yxdh"),r=i("CmOP"),d=i("NYxO"),u={components:{"acupoin-img":o.a,"jingyan-bar":r.a},computed:s()({},Object(d.d)("patient",{empBasicMainID:function(e){return e.empBasicMainID},registrationNum:function(e){return e.registrationNum}}),{xueweiListData:{get:function(){return 1===this.tagIndex?this.xueweiData:2===this.tagIndex?this.kaixueData:3===this.tagIndex?this.bixueData:void 0},set:function(){return this.xueweiListData}},isShowAdd:function(){return 2==this.tagIndex},isShowRemmove:function(){return 1==this.tagIndex},canvasListData:function(){return this.xueweiData}}),data:function(){return{tagIndex:1,xueweiData:[],kaixueData:[],bixueData:[],xuejieObj:{},dialogXueWei:!1,xueweiAddListData:[],searchTextWuewei:"",kauxueTime:{timer:null,jsTime:null,timebar:100},timer:null,zjMinutes:"10",dialog_chineseMedicine:!1,dialog_xiyi:!1,xyData:[],zyData:[],searchXY:"",searchZY:"",chineseMedicineName:"",chineseMedicineCode:"",westernMedicineName:"",westernMedicineCode:""}},methods:{getJingYanCode:function(e){var t=this;Object(c.v)({prescriptionCode:e.prescriptionCode}).then(function(e){t.xueweiData=e.data.data})},handelOpenjingyan:function(){this.$refs.getJingYan.jingyanOpenDialog()},handelSaveJingYan:function(){var e=[].concat(n()(this.xueweiData));this.$refs.getJingYan.jingyanSaveJingYan(e)},handelSelectXY:function(){this.dialog_xiyi=!0,this.searchXY="",this.handelSearchXY()},handelSearchXY:function(){var e=this;Object(c.z)({searchText:this.searchXY}).then(function(t){e.xyData=t.data.data})},handelSelectXiYi:function(e){this.dialog_xiyi=!1,this.westernMedicineName=e.westernMedicineName,this.westernMedicineCode=e.westernMedicineCode},handelSelectZYi:function(e){this.chineseMedicineName=e.chineseMedicineName,this.chineseMedicineCode=e.chineseMedicineCode,this.dialog_chineseMedicine=!1},handelSelectZY:function(){this.dialog_chineseMedicine=!0,this.searchZY="",this.handelSearchZY()},handelSearchZY:function(){var e=this;Object(c._62)({searchText:this.searchZY}).then(function(t){e.zyData=t.data.data})},handelFinish:function(e){var t=this;0!=this.xueweiData.length?Object(c._79)({empBasicMainID:this.empBasicMainID,registrationNum:this.registrationNum,zjMinutes:this.zjMinutes,fangJiDetailList:this.xueweiData,westernMedicineCode:this.westernMedicineCode,chineseMedicineCode:this.chineseMedicineCode,flag:e}).then(function(i){"0"===i.data.code?(t.$message.success("保存成功!"),"1"==e&&t.$router.push("list")):t.$message.error("保存失败!")}):this.$message.error("穴位不能为空!")},handelSelectTag:function(e,t){this.tagIndex=e,document.querySelector(".zj-xuewei .active").className="",t.target.className="active"},handelGetXueJie:function(e){var t=this;e.acupointCode!=this.xuejieObj.acupointCode&&Object(c.Q)({acupointCode:e.acupointCode}).then(function(e){t.xuejieObj=e.data.data[0]})},handelRemoveXue:function(e,t){this.xueweiListData.splice(e,1)},handelAddXue:function(e,t){this.$message.success(t.acupointName+" 穴位添加成功！"),this.xueweiData.push(t)},handelDialogAddxuewei:function(){this.dialogXueWei=!0,this.getAllAcupointList()},getAllAcupointList:function(){var e=this;Object(c.w)({searchText:this.searchTextWuewei}).then(function(t){"0"===t.data.code&&(e.xueweiAddListData=t.data.data)})},handelDbclickAddxuewei:function(e,t){this.xueweiData.find(function(t){return e===t})?this.$message.warning("穴位["+e.acupointName+"]已存在列表!"):(this.xueweiData.push(e),this.$message.success(e.acupointName+" 穴位添加成功！"))},getInitListData:function(){var e=this;Object(c._5)().then(function(t){"0"==t.data.code&&(e.kaixueData=t.data.data)}),Object(c.A)().then(function(t){"0"==t.data.code&&(e.bixueData=t.data.data)}),Object(c.T)().then(function(t){"0"==t.data.code&&(e.kauxueTime=s()({},t.data.data,e.kauxueTime),e.timerKaixueEnd())})},timerKaixueEnd:function(){var e=this;this.timer=setInterval(function(){e.kauxueTime.timebar<=0?window.clearInterval(e.timer):e.kauxueTime.timebar=parseInt(e.kauxueTime.timebar-e.kauxueTime.txtPointIfOpenEndTime/100)},6e4)}},mounted:function(){this.getInitListData()}},h={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("section",[a("el-row",[a("el-col",{attrs:{span:24}},[a("span",{staticClass:"top-nav-link",on:{click:function(t){e.goBack()}}},[e._v("返回上一页")])]),e._v(" "),a("el-col",{attrs:{span:14}},[a("el-row",{staticClass:"zj-xuewei"},[a("el-col",{attrs:{span:12}},[a("span",{staticClass:"active",on:{click:function(t){e.handelSelectTag(1,t)}}},[e._v("穴位")]),e._v(" "),a("span",{on:{click:function(t){e.handelSelectTag(2,t)}}},[e._v("开穴")]),e._v(" "),a("span",{on:{click:function(t){e.handelSelectTag(3,t)}}},[e._v("闭穴")])]),e._v(" "),a("el-col",{attrs:{span:11,align:"right"}},[a("el-button",{attrs:{size:"mini",type:"primary",icon:"el-icon-plus"},on:{click:e.handelDialogAddxuewei}},[e._v("添加")])],1),e._v(" "),a("el-col",{staticStyle:{"margin-top":"8px"},attrs:{span:24}},[a("el-table",{attrs:{data:e.xueweiListData,height:"368"}},[a("el-table-column",{attrs:{type:"index",width:"40"}}),e._v(" "),a("el-table-column",{attrs:{prop:"acupointName",width:"80px",label:"穴位"}}),e._v(" "),a("el-table-column",{attrs:{prop:"positionExplain","min-width":"240px",label:"穴位说明"}}),e._v(" "),a("el-table-column",{attrs:{label:"穴解",width:"80px"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-popover",{attrs:{placement:"right-end",width:"420",trigger:"hover"}},[a("div",[a("div",[e._v("【穴位说明】 "+e._s(e.xuejieObj.positionExplain))]),e._v(" "),a("div",[e._v("【X坐标】 "+e._s(e.xuejieObj.pointX))]),e._v(" "),a("div",[e._v("【Y坐标】 "+e._s(e.xuejieObj.pointY))]),e._v(" "),a("div",[e._v("【所属经络】"+e._s(e.xuejieObj.meridianName))]),e._v(" "),a("div",[e._v("【在经络上的顺序】"+e._s(e.xuejieObj.meridianOrder))])]),e._v(" "),a("img",{staticClass:"chufang-icon",attrs:{slot:"reference",src:i("uHXg")},on:{mouseover:function(i){e.handelGetXueJie(t.row)}},slot:"reference"})])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"name",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[e.isShowRemmove?a("el-button",{attrs:{type:"danger",size:"mini",icon:"el-icon-delete"},on:{click:function(i){e.handelRemoveXue(t.$index)}}}):e._e(),e._v(" "),a("el-button",{directives:[{name:"show",rawName:"v-show",value:e.isShowAdd,expression:"isShowAdd"}],attrs:{type:"danger",size:"mini",icon:"el-icon-plus",circle:""},on:{click:function(i){e.handelAddXue(t.$index,t.row)}}})]}}])})],1)],1)],1),e._v(" "),a("el-row",{staticStyle:{"margin-top":"16px","font-size":"16px"}},[a("el-col",{staticClass:"time-bar bar-left",attrs:{span:4}},[a("span",[e._v("开穴时间")])]),e._v(" "),a("el-col",{staticClass:"time-bar bar-right",attrs:{span:20}},[e._v("\n          "+e._s(e.kauxueTime.effectiveTime)+"\n        ")]),e._v(" "),a("el-col",{staticStyle:{"margin-top":"16px"},attrs:{span:24}},[a("el-progress",{attrs:{"text-inside":!0,"stroke-width":24,percentage:e.kauxueTime.timebar,color:"rgba(233, 190, 147, 1)"}})],1),e._v(" "),a("el-col",{staticStyle:{"margin-top":"16px","line-height":"36px"},attrs:{span:24}},[a("el-col",{attrs:{span:4}},[e._v("留针时间")]),e._v(" "),a("el-col",{attrs:{span:4}},[a("el-input",{model:{value:e.zjMinutes,callback:function(t){e.zjMinutes=t},expression:"zjMinutes"}})],1),e._v(" "),a("el-col",{attrs:{span:4}},[e._v("   分钟")])],1),e._v(" "),a("el-col",{staticStyle:{"margin-top":"22px"}},[a("el-form",{attrs:{"label-width":"80px"}},[a("el-form-item",{attrs:{label:"西医病名"}},[a("el-input",{attrs:{placeholder:"请输入西医名称"},model:{value:e.westernMedicineName,callback:function(t){e.westernMedicineName=t},expression:"westernMedicineName"}},[a("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:e.handelSelectXY},slot:"append"})],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"中医病名"}},[a("el-input",{attrs:{placeholder:"请输入中医病名"},model:{value:e.chineseMedicineName,callback:function(t){e.chineseMedicineName=t},expression:"chineseMedicineName"}},[a("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:e.handelSelectZY},slot:"append"})],1)],1)],1)],1)],1)],1),e._v(" "),a("el-col",{attrs:{offset:1,span:9}},[a("acupoin-img",{attrs:{dataList:e.xueweiListData}})],1)],1),e._v(" "),a("el-row",{staticClass:"toolbar"},[a("el-col",{attrs:{span:12,align:"left"}},[a("el-button",{attrs:{type:"primary"},on:{click:e.handelOpenjingyan}},[e._v("取经验方")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.handelSaveJingYan}},[e._v("存经验方")])],1),e._v(" "),a("el-col",{attrs:{span:12,align:"right"}},[a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.handelFinish(0)}}},[e._v("保存就诊")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.handelFinish(1)}}},[e._v("完成就诊")])],1)],1),e._v(" "),a("el-dialog",{attrs:{width:"50%",title:"添加穴位",center:"",visible:e.dialogXueWei},on:{"update:visible":function(t){e.dialogXueWei=t}}},[a("el-row",[a("el-col",{attrs:{offset:5,span:14}},[a("el-input",{attrs:{"suffix-icon":"el-icon-search",placeholder:"输入您想查询的穴位编码、名称、拼音码"},nativeOn:{keydown:function(t){return"button"in t||!e._k(t.keyCode,"enter",13,t.key,"Enter")?e.getAllAcupointList(t):null}},model:{value:e.searchTextWuewei,callback:function(t){e.searchTextWuewei=t},expression:"searchTextWuewei"}})],1),e._v(" "),a("el-col",{staticStyle:{"margin-top":"10px"},attrs:{span:24}},[a("el-table",{attrs:{data:e.xueweiAddListData,width:"100%",height:"500"},on:{"cell-dblclick":e.handelDbclickAddxuewei}},[a("el-table-column",{attrs:{label:"编码",prop:"acupointCode"}}),e._v(" "),a("el-table-column",{attrs:{label:"名称",prop:"acupointName"}}),e._v(" "),a("el-table-column",{attrs:{label:"拼音码",prop:"pinYinCode"}})],1)],1)],1)],1),e._v(" "),a("el-dialog",{attrs:{visible:e.dialog_xiyi,width:"60%"},on:{"update:visible":function(t){e.dialog_xiyi=t}}},[a("el-row",[a("el-col",{attrs:{span:12,offset:6}},[a("el-input",{attrs:{clearable:"",placeholder:"请输入您想要查询的病名或拼音码","prefix-icon":"el-icon-search"},on:{blur:e.handelSearchXY},nativeOn:{keydown:function(t){return"button"in t||!e._k(t.keyCode,"enter",13,t.key,"Enter")?e.handelSearchXY(t):null}},model:{value:e.searchXY,callback:function(t){e.searchXY=t},expression:"searchXY"}})],1),e._v(" "),a("el-col",{staticStyle:{"margin-top":"26px"}},[a("el-table",{staticStyle:{width:"100%"},attrs:{height:"480",data:e.xyData},on:{"row-dblclick":e.handelSelectXiYi}},[a("el-table-column",{attrs:{"header-align":"center",align:"center",width:"120",prop:"westernMedicineCode",label:"西医编码"}}),e._v(" "),a("el-table-column",{attrs:{"header-align":"center",align:"center",prop:"westernMedicineName",label:"西医病名"}}),e._v(" "),a("el-table-column",{attrs:{"header-align":"center",align:"center",prop:"pinYinCode",label:"拼音码"}})],1)],1)],1)],1),e._v(" "),a("el-dialog",{attrs:{visible:e.dialog_chineseMedicine,width:"60%"},on:{"update:visible":function(t){e.dialog_chineseMedicine=t}}},[a("el-row",[a("el-col",{attrs:{span:12,offset:6}},[a("el-input",{attrs:{clearable:"",placeholder:"请输入您想要查询的病名或拼音码","prefix-icon":"el-icon-search"},on:{blur:e.handelSearchZY},nativeOn:{keydown:function(t){return"button"in t||!e._k(t.keyCode,"enter",13,t.key,"Enter")?e.handelSearchZY(t):null}},model:{value:e.searchZY,callback:function(t){e.searchZY=t},expression:"searchZY"}})],1),e._v(" "),a("el-col",{staticStyle:{"margin-top":"26px"}},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.zyData,height:"480"},on:{"row-dblclick":e.handelSelectZYi}},[a("el-table-column",{attrs:{"header-align":"right",align:"right",width:"120",prop:"chineseMedicineCode",label:"中医编码"}}),e._v(" "),a("el-table-column",{attrs:{"header-align":"center",align:"center",prop:"chineseMedicineName",label:"中医病名"}}),e._v(" "),a("el-table-column",{attrs:{"header-align":"center",align:"center",prop:"pinYinCode",label:"拼音码"}})],1)],1)],1)],1),e._v(" "),a("jingyan-bar",{ref:"getJingYan",on:{jingyanCode:e.getJingYanCode}})],1)},staticRenderFns:[]};var p=i("VU/8")(u,h,!1,function(e){i("Oms7")},"data-v-5f9667ff",null);t.default=p.exports},Oms7:function(e,t){}});
//# sourceMappingURL=26.b823439aec80433d325a.js.map