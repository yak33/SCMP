webpackJsonp([35],{Lt0I:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a("Dd8w"),n=a.n(i),l=a("gyMJ"),r=a("NYxO"),c=a("8KPR"),o={computed:n()({},Object(r.d)("database",{xx:function(e){return e.xx}}),{usable:function(){return"add"!=this.opType}}),data:function(){return{tableData:[],dialog_item:!1,dialog_unit:!1,unitSearch:"",unitData:[],opType:"add",formData:{unitcode:"",unitname:"",medicalcarecode:"",medicalcarename:"",pinyincode:"",hismedicalcarecode:"",singleprice:""},total:0,title:"",tempData:"",buttonShow:!1,search:{searchText:"",pageNumber:1,pageSize:10},rules:{medicalcarecode:[{required:!0,message:"请输入项目编码",trigger:"blur"}],medicalcarename:[{required:!0,message:"请输入项目名称",trigger:"blur"}],pinyincode:[{required:!0,message:"请输入拼音码",trigger:"blur"}],hismedicalcarecode:[{required:!0,message:"请输入HIS编码",trigger:"blur"}],unitname:[{required:!0,message:"请选择单位名称",trigger:"blur"}],singleprice:[{required:!0,message:"请输入项目单价",trigger:"blur"}]}}},methods:{handelSubmit:function(){"add"==this.opType?this.funCheckFormData():this.handelUpdataDW()},handelInsert:function(){var e=this;this.formData.medicalcarename2=this.formData.medicalcarename,Object(l._38)(this.formData).then(function(t){"0"==t.data.code?(e.$message.success("保存成功！"),e.dialog_item=!1,e.funGetAllData()):e.$message.error("保存失败！")})},funGetAllData:function(){this.search.searchText="",this.pageNumber=1,this.getData()},funCheckFormData:function(){var e=this;this.$refs.ruleForm.validate(function(t){t&&e.handelInsert()})},handelOpenDialog:function(){this.dialog_unit=!0,this.getUnitData()},handelAddItem:function(){this.title="新增",this.opType="add";this.formData=n()({},{unitcode:"",unitname:"",medicalcarecode:"",medicalcarename:"",pinyincode:"",hismedicalcarecode:"",singleprice:""}),this.dialog_item=!0,this.buttonShow=!0},getPinCode:function(){this.formData.medicalcarename&&"add"==this.opType&&(this.formData.pinyincode=Object(c.a)(this.formData.medicalcarename))},handelDelete:function(e){var t=this;this.$confirm("确定要执行删除操作？","操作提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){Object(l.h)({medicalCareCode:e.medicalcarecode}).then(function(e){"0"==e.data.code?(t.$message.success("删除成功!"),t.funGetAllData()):t.$message.error("删除失败！")}),t.tableData.splice(e,1)}).catch(function(){})},handelView:function(e){this.title="查看",this.opType="view",this.formData=n()({},e),this.dialog_item=!0,this.resetFields()},handelUpdata:function(e){this.title="修改",this.opType="edit",this.buttonShow=!0,this.dialog_item=!0,this.tempData=e.medicalcarename,this.formData=e},dialogClose:function(){var e=this;this.buttonShow=!1,this.formData={},this.$nextTick(function(){e.$refs.ruleForm.resetFields()})},getData:function(){var e=this;Object(l._9)(this.search).then(function(t){"0"==t.data.code?(e.tableData=t.data.data.rows,e.total=t.data.data.total):(e.tableData=[],e.total=0)})},getUnitData:function(){var e=this;Object(l._25)({searchText:this.unitSearch,pageSize:9999}).then(function(t){"0"==t.data.code?e.unitData=t.data.data.rows:e.unitData=[]})},handelSelectUnitItem:function(e){this.formData.unitcode=e.unitcode,this.formData.unitname=e.unitname,this.dialog_unit=!1},getDataBySearch:function(){this.search.pageNumber=1,this.getData()},handelPageChange:function(e){this.search.pageNumber=e,this.getData()},resetFields:function(){},handelUpdataDW:function(){var e=this;this.formData.medicalcarename2=this.formData.medicalcarename,this.formData.medicalcarename=this.tempData,Object(l._66)(this.formData).then(function(t){"0"==t.data.code?(e.$message.success("修改成功!"),e.funGetAllData(),e.dialog_item=!1):e.$message.error("修改失败!")})}},mounted:function(){this.getData()}},s={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("section",[i("el-row",[i("el-col",{attrs:{span:8}},[i("el-input",{attrs:{"suffix-icon":"el-icon-search",clearable:"",placeholder:"输入您想查询的医疗项目名称或拼音码"},on:{blur:function(t){e.getDataBySearch()}},nativeOn:{keyup:function(t){if(!("button"in t)&&e._k(t.keyCode,"enter",13,t.key,"Enter"))return null;e.getData()}},model:{value:e.search.searchText,callback:function(t){e.$set(e.search,"searchText",t)},expression:"search.searchText"}})],1),e._v(" "),i("el-col",{attrs:{span:15,align:"right"}},[i("el-button",{attrs:{size:"small",type:"primary",icon:"el-icon-plus"},on:{click:e.handelAddItem}},[e._v("新 增")])],1),e._v(" "),i("el-col",{staticStyle:{"margin-top":"16px"},attrs:{span:24}},[i("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData},on:{"cell-dblclick":e.handelView}},[i("el-table-column",{attrs:{prop:"medicalcarecode",label:"医疗项目编码",width:"200"}}),e._v(" "),i("el-table-column",{attrs:{prop:"medicalcarename","header-align":"center",align:"center",label:"医疗项目名称","show-overflow-tooltip":""}}),e._v(" "),i("el-table-column",{attrs:{prop:"pinyincode","header-align":"center",align:"center",label:"拼音码"}}),e._v(" "),i("el-table-column",{attrs:{prop:"unitname","header-align":"center",align:"center",label:"单位"}}),e._v(" "),i("el-table-column",{attrs:{prop:"singleprice","header-align":"center",align:"center",label:"单价"}}),e._v(" "),i("el-table-column",{attrs:{prop:"hismedicalcarecode","header-align":"center",align:"center",label:"HIS编码"}}),e._v(" "),i("el-table-column",{attrs:{"header-align":"center",width:"120",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("el-button-group",[i("span",{staticClass:"icon-button-img",on:{click:function(a){e.handelDelete(t.row)}}},[i("img",{attrs:{src:a("DKbd")}})]),e._v(" "),i("span",{staticClass:"icon-button-img",on:{click:function(a){e.handelUpdata(t.row)}}},[i("img",{attrs:{src:a("4g3x")}})])])]}}])})],1)],1),e._v(" "),i("el-col",{staticClass:"toolbar",attrs:{span:24}},[i("el-pagination",{staticStyle:{float:"right"},attrs:{background:"",layout:"total, prev, pager, next, jumper","current-page":e.search.pageNumber,"page-size":e.search.pageSize,total:e.total},on:{"current-change":e.handelPageChange}})],1)],1),e._v(" "),i("el-dialog",{attrs:{title:"医疗项目 "+e.title,center:"",width:"60%",visible:e.dialog_item},on:{close:e.dialogClose,"update:visible":function(t){e.dialog_item=t}}},[i("el-row",[i("el-form",{ref:"ruleForm",attrs:{model:e.formData,"label-width":"100px",rules:e.rules}},[i("el-col",{attrs:{span:24}},[i("el-form-item",{attrs:{label:"项目编码",prop:"medicalcarecode"}},[i("el-input",{attrs:{disabled:e.usable},model:{value:e.formData.medicalcarecode,callback:function(t){e.$set(e.formData,"medicalcarecode",t)},expression:"formData.medicalcarecode"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"项目名称",prop:"medicalcarename"}},[i("el-input",{on:{blur:e.getPinCode},model:{value:e.formData.medicalcarename,callback:function(t){e.$set(e.formData,"medicalcarename",t)},expression:"formData.medicalcarename"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"拼音码",prop:"pinyincode"}},[i("el-input",{model:{value:e.formData.pinyincode,callback:function(t){e.$set(e.formData,"pinyincode",t)},expression:"formData.pinyincode"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"HIS编码",prop:"hismedicalcarecode"}},[i("el-input",{model:{value:e.formData.hismedicalcarecode,callback:function(t){e.$set(e.formData,"hismedicalcarecode",t)},expression:"formData.hismedicalcarecode"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"单位",prop:"unitname"}},[i("el-input",{attrs:{readonly:""},model:{value:e.formData.unitname,callback:function(t){e.$set(e.formData,"unitname",t)},expression:"formData.unitname"}},[i("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:e.handelOpenDialog},slot:"append"})],1)],1),e._v(" "),i("el-form-item",{attrs:{label:"单价",prop:"singleprice"}},[i("el-input",{model:{value:e.formData.singleprice,callback:function(t){e.$set(e.formData,"singleprice",t)},expression:"formData.singleprice"}})],1)],1)],1),e._v(" "),i("el-col",{staticClass:"toolbar",attrs:{align:"center"}},[i("el-button",{attrs:{size:"small"},on:{click:function(t){e.dialog_item=!1}}},[e._v("取消")]),e._v(" "),e.buttonShow?i("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(t){e.handelSubmit()}}},[e._v("确定")]):e._e()],1)],1)],1),e._v(" "),i("el-dialog",{attrs:{title:"单位参考",width:"45%",center:"",visible:e.dialog_unit},on:{"update:visible":function(t){e.dialog_unit=t}}},[i("el-row",[i("el-col",{attrs:{offset:1,span:22}},[i("el-input",{attrs:{"suffix-icon":"el-icon-search",placeholder:"请输入单位编码或名称查询",clearable:""},on:{blur:e.getUnitData},model:{value:e.unitSearch,callback:function(t){e.unitSearch=t},expression:"unitSearch"}})],1),e._v(" "),i("el-col",{staticStyle:{"margin-top":"22px"}},[i("el-table",{staticStyle:{width:"100%"},attrs:{data:e.unitData,height:"280"},on:{"row-dblclick":e.handelSelectUnitItem}},[i("el-table-column",{attrs:{prop:"unitcode",label:"单位编码",width:"180"}}),e._v(" "),i("el-table-column",{attrs:{prop:"unitname",label:"单位名称"}})],1)],1)],1)],1)],1)},staticRenderFns:[]};var d=a("VU/8")(o,s,!1,function(e){a("t/pt")},"data-v-3ff2357e",null);t.default=d.exports},"t/pt":function(e,t){}});
//# sourceMappingURL=35.843724a638dc1c1f7b75.js.map