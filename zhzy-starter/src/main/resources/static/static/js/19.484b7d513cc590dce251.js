webpackJsonp([19],{U3H3:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a("Dd8w"),l=a.n(n),o=a("gyMJ"),r=a("8KPR"),i=a("NYxO"),s={computed:l()({},Object(i.d)("database",{unitAllList:function(e){return e.unitAllList},drugWayList:function(e){return e.drugWayList},dosageList:function(e){return e.dosageList}})),data:function(){return{tableData:[{date:22,name:"abc"}],dialog_item:!1,formData:{upperlimit:"0.00",lowerlimit:"0.00"},tempData:"",opType:"add",total:0,title:"",buttonShow:!1,search:{searchText:"",pageNumber:0,pageSize:10},rules:{drugname:[{required:!0,message:"请输入药品名称",trigger:"blur"}],inputcode:[{required:!0,message:"请输入输入码",trigger:"blur"}]}}},methods:{handelSubmit:function(){"add"==this.opType?this.funCheckFormData():this.handelUpdataXiYao(this.formData)},funCheckFormData:function(){var e=this;this.$refs.ruleForm.validate(function(t){t&&e.handelInsertYC(e.formData)})},getPinCode:function(){this.formData.drugname&&"add"==this.opType&&(this.formData.inputcode=Object(r.a)(this.formData.drugname))},handelSelectChangeDosagename:function(e){var t=this;this.dosageList.forEach(function(a){a.dosagecode==e&&(t.formData.dosagename=a.dosagename)})},handelSelectChangeDrugwayname:function(e){var t=this;this.drugWayList.forEach(function(a){a.drugwaycode==e&&(t.formData.drugwayname=a.drugwayname)})},handelSelectChangeUnitname:function(e){var t=this;this.unitAllList.forEach(function(a){a.unitcode==e&&(t.formData.unitname=a.unitname)})},handelSelectChangeSinglemeasureunitname:function(e){var t=this;this.unitAllList.forEach(function(a){a.unitcode==e&&(t.formData.singlemeasureunitname=a.unitname)})},handelSelectChangePrescriptionunitname:function(e){var t=this;this.unitAllList.forEach(function(a){a.unitcode==e&&(t.formData.prescriptionunitname=a.unitname)})},handelAddItem:function(){this.title="新增",this.opType="add",this.formData={inputcode:"",drugmodelcode:1,drugmodelname:"西药",drugwaycode:10111,drugwayname:"口服",dosagecode:2002,dosagename:"颗粒剂",units:1096,unitname:"g",singlemeasureunit:1097,singlemeasureunitname:"粒",prescriptionunit:1133,prescriptionunitname:"付",stopflag:!1,drugflag:2},this.dialog_item=!0,this.buttonShow=!0},handelDelete:function(e){var t=this;this.$confirm("确定要执行删除操作？","操作提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){Object(o.m)({drugcode:e.drugcode}).then(function(e){"0"==e.data.code&&t.$message.success("删除成功！")}),t.tableData.splice(e,1)}).catch(function(){})},handelView:function(e){this.title="查看",this.opType="view",this.formData=l()({},e),this.dialog_item=!0},handelUpdata:function(e){this.title="修改",this.opType="edit",this.tempData=e.drugname,this.buttonShow=!0,this.formData=e,this.dialog_item=!0},dialogClose:function(){var e=this;this.buttonShow=!1,this.formData={},this.$nextTick(function(){e.$refs.ruleForm.resetFields()})},getData:function(){var e=this;Object(o._31)(this.search).then(function(t){"0"==t.data.code?(e.tableData=t.data.data.rows,e.total=t.data.data.total):(e.tableData=[],e.total=0)})},getDataBySearch:function(){this.search.searchText&&(this.search.pageNumber=1,this.getData())},handelPageChange:function(e){this.search.pageNumber=e,this.getData()},handelInsertYC:function(e){var t=this;Object(o._43)(e).then(function(e){"0"==e.data.code?(t.$message.success("添加成功!"),t.getData(),t.dialog_item=!1):t.$message.error("添加失败! "+e.data.msg)})},handelUpdataXiYao:function(e){var t=this;this.formData.drugname2=this.formData.drugname,this.formData.drugname=this.tempData,Object(o._74)(e).then(function(e){"0"==e.data.code?(t.$message.success("修改成功!"),t.getData(),t.dialog_item=!1):t.$message.error("修改失败")})}},mounted:function(){this.getData()}},c={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("section",[n("el-row",[n("el-col",{attrs:{span:8}},[n("el-input",{attrs:{"suffix-icon":"el-icon-search",clearable:"",placeholder:"输入您想查询的药品名称/药品代码/输入码"},on:{blur:function(t){e.getDataBySearch()}},nativeOn:{keyup:function(t){if(!("button"in t)&&e._k(t.keyCode,"enter",13,t.key,"Enter"))return null;e.getData()}},model:{value:e.search.searchText,callback:function(t){e.$set(e.search,"searchText",t)},expression:"search.searchText"}})],1),e._v(" "),n("el-col",{attrs:{span:15,align:"right"}},[n("el-button",{attrs:{size:"small",type:"primary",icon:"el-icon-plus"},on:{click:e.handelAddItem}},[e._v("新 增")])],1),e._v(" "),n("el-col",{staticStyle:{"margin-top":"16px"},attrs:{span:24}},[n("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData},on:{"cell-dblclick":e.handelView}},[n("el-table-column",{attrs:{type:"expand"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-form",{staticClass:"demo-table-expand",attrs:{"label-position":"left",inline:""}},[n("el-form-item",{attrs:{label:"药品剂型:"}},[n("span",[e._v(e._s(t.row.dosagename))])]),e._v(" "),n("el-form-item",{attrs:{label:"处方单位:"}},[n("span",[e._v(e._s(t.row.prescriptionunitname))])]),e._v(" "),n("el-form-item",{attrs:{label:"药品规格:"}},[n("span",[e._v(e._s(t.row.packageunits))])]),e._v(" "),n("el-form-item",{attrs:{label:"计量单位:"}},[n("span",[e._v(e._s(t.row.unitname))])]),e._v(" "),n("el-form-item",{attrs:{label:"药品服法:"}},[n("span",[e._v(e._s(t.row.drugwayname))])]),e._v(" "),n("el-form-item",{attrs:{label:"药品售价:"}},[n("span",[e._v(e._s(t.row.lprice))])]),e._v(" "),n("el-form-item",{attrs:{label:"药量上限:"}},[n("span",[e._v(e._s(t.row.upperlimit))])]),e._v(" "),n("el-form-item",{attrs:{label:"药量下限:"}},[n("span",[e._v(e._s(t.row.lowerlimit))])]),e._v(" "),n("el-form-item",{attrs:{label:"HIS对应编码:"}},[n("span",[e._v(e._s(t.row.hiscorrecode))])]),e._v(" "),n("el-form-item",{attrs:{label:"单剂量单位名称:"}},[n("span",[e._v(e._s(t.row.singlemeasureunitname))])])],1)]}}])}),e._v(" "),n("el-table-column",{attrs:{prop:"drugcode",label:"药品编码",width:"100"}}),e._v(" "),n("el-table-column",{attrs:{prop:"drugname",label:"药品名称",width:"180"}}),e._v(" "),n("el-table-column",{attrs:{prop:"othername",label:"药品别名"}}),e._v(" "),n("el-table-column",{attrs:{prop:"packageunits",label:"药品规格"}}),e._v(" "),n("el-table-column",{attrs:{prop:"inputcode",label:"输入码"}}),e._v(" "),n("el-table-column",{attrs:{label:"操作","header-align":"center",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-button-group",[n("span",{staticClass:"icon-button-img",on:{click:function(a){e.handelDelete(t.row)}}},[n("img",{attrs:{src:a("DKbd")}})]),e._v(" "),n("span",{staticClass:"icon-button-img",on:{click:function(a){e.handelUpdata(t.row)}}},[n("img",{attrs:{src:a("4g3x")}})])])]}}])})],1)],1),e._v(" "),n("el-col",{staticClass:"toolbar",attrs:{span:24}},[n("el-pagination",{staticStyle:{float:"right"},attrs:{background:"",layout:"total, prev, pager, next, jumper","current-page":e.search.pageNumber,"page-size":e.search.pageSize,total:e.total},on:{"current-change":e.handelPageChange}})],1)],1),e._v(" "),n("el-dialog",{attrs:{title:"西药管理 "+e.title,center:"",width:"80%",visible:e.dialog_item},on:{close:e.dialogClose,"update:visible":function(t){e.dialog_item=t}}},[n("el-row",[n("el-form",{ref:"ruleForm",attrs:{model:e.formData,"label-width":"100px",rules:e.rules}},[n("el-col",{attrs:{span:8}},[n("el-form-item",{attrs:{label:"药品编码"}},[n("el-input",{attrs:{disabled:""},model:{value:e.formData.drugcode,callback:function(t){e.$set(e.formData,"drugcode",t)},expression:"formData.drugcode"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"药品类别"}},[n("el-input",{attrs:{readonly:""},model:{value:e.formData.drugmodelname,callback:function(t){e.$set(e.formData,"drugmodelname",t)},expression:"formData.drugmodelname"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"药品服法"}},[n("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择"},on:{change:e.handelSelectChangeDrugwayname},model:{value:e.formData.drugwaycode,callback:function(t){e.$set(e.formData,"drugwaycode",t)},expression:"formData.drugwaycode"}},e._l(e.drugWayList,function(e){return n("el-option",{key:e.drugwaycode,attrs:{label:e.drugwayname,value:e.drugwaycode}})}))],1),e._v(" "),n("el-form-item",{attrs:{label:"计量系数"}},[n("el-input",{model:{value:e.formData.measurementcoefficient,callback:function(t){e.$set(e.formData,"measurementcoefficient",t)},expression:"formData.measurementcoefficient"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"单计量"}},[n("el-input",{ref:"aaa",model:{value:e.formData.singlemeasure,callback:function(t){e.$set(e.formData,"singlemeasure",t)},expression:"formData.singlemeasure"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"药量上限"}},[n("el-input-number",{staticStyle:{width:"100%"},attrs:{"controls-position":"right",precision:2,min:0,max:100},model:{value:e.formData.upperlimit,callback:function(t){e.$set(e.formData,"upperlimit",t)},expression:"formData.upperlimit"}})],1)],1),e._v(" "),n("el-col",{attrs:{span:8}},[n("el-form-item",{attrs:{label:"药品名称",prop:"drugname"}},[n("el-input",{on:{blur:e.getPinCode},model:{value:e.formData.drugname,callback:function(t){e.$set(e.formData,"drugname",t)},expression:"formData.drugname"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"药品别名"}},[n("el-input",{model:{value:e.formData.othername,callback:function(t){e.$set(e.formData,"othername",t)},expression:"formData.othername"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"药品剂型"}},[n("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择"},on:{change:e.handelSelectChangeDosagename},model:{value:e.formData.dosagecode,callback:function(t){e.$set(e.formData,"dosagecode",t)},expression:"formData.dosagecode"}},e._l(e.dosageList,function(e){return n("el-option",{key:e.dosagecode,attrs:{label:e.dosagename,value:e.dosagecode}})}))],1),e._v(" "),n("el-form-item",{attrs:{label:"计量单位"}},[n("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择"},on:{change:e.handelSelectChangeUnitname},model:{value:e.formData.units,callback:function(t){e.$set(e.formData,"units",t)},expression:"formData.units"}},e._l(e.unitAllList,function(e){return n("el-option",{key:e.unitcode,attrs:{label:e.unitname,value:e.unitcode}})}))],1),e._v(" "),n("el-form-item",{attrs:{label:"单计量单位"}},[n("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择"},on:{change:e.handelSelectChangeSinglemeasureunitname},model:{value:e.formData.singlemeasureunit,callback:function(t){e.$set(e.formData,"singlemeasureunit",t)},expression:"formData.singlemeasureunit"}},e._l(e.unitAllList,function(e){return n("el-option",{key:e.unitcode,attrs:{label:e.unitname,value:e.unitcode}})}))],1),e._v(" "),n("el-form-item",{attrs:{label:"药量下限"}},[n("el-input-number",{staticStyle:{width:"100%"},attrs:{"controls-position":"right",precision:2,min:0,max:100},model:{value:e.formData.lowerlimit,callback:function(t){e.$set(e.formData,"lowerlimit",t)},expression:"formData.lowerlimit"}})],1)],1),e._v(" "),n("el-col",{attrs:{span:8}},[n("el-form-item",{attrs:{label:"输入码",prop:"inputcode"}},[n("el-input",{model:{value:e.formData.inputcode,callback:function(t){e.$set(e.formData,"inputcode",t)},expression:"formData.inputcode"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"HIS对应编码"}},[n("el-input",{model:{value:e.formData.hiscorrecode,callback:function(t){e.$set(e.formData,"hiscorrecode",t)},expression:"formData.hiscorrecode"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"药品规格"}},[n("el-input",{model:{value:e.formData.packageunits,callback:function(t){e.$set(e.formData,"packageunits",t)},expression:"formData.packageunits"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"处方单位"}},[n("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择"},on:{change:e.handelSelectChangePrescriptionunitname},model:{value:e.formData.prescriptionunit,callback:function(t){e.$set(e.formData,"prescriptionunit",t)},expression:"formData.prescriptionunit"}},e._l(e.unitAllList,function(e){return n("el-option",{key:e.unitcode,attrs:{label:e.unitname,value:e.unitcode}})}))],1),e._v(" "),n("el-form-item",{attrs:{label:"药品售价"}},[n("el-input",{model:{value:e.formData.lprice,callback:function(t){e.$set(e.formData,"lprice",t)},expression:"formData.lprice"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"停用"}},[n("el-checkbox",{model:{value:e.formData.stopflag,callback:function(t){e.$set(e.formData,"stopflag",t)},expression:"formData.stopflag"}})],1)],1),e._v(" "),n("el-col",{attrs:{span:24}},[n("el-form-item",{attrs:{label:"备注"}},[n("el-input",{attrs:{type:"textarea"},model:{value:e.formData.remark,callback:function(t){e.$set(e.formData,"remark",t)},expression:"formData.remark"}})],1)],1)],1),e._v(" "),n("el-col",{staticClass:"toolbar",attrs:{align:"center"}},[n("el-button",{attrs:{size:"small"},on:{click:function(t){e.dialog_item=!1}}},[e._v("取消")]),e._v(" "),e.buttonShow?n("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(t){e.handelSubmit()}}},[e._v("确定")]):e._e()],1)],1)],1)],1)},staticRenderFns:[]};var u=a("VU/8")(s,c,!1,function(e){a("qJPX")},"data-v-93f63636",null);t.default=u.exports},qJPX:function(e,t){}});
//# sourceMappingURL=19.484b7d513cc590dce251.js.map